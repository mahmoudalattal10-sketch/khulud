const { PrismaClient } = require('@prisma/client');
const prisma = new PrismaClient();

const reviewTemplates = [
    { text: "Ù…ÙˆÙ‚Ø¹ Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠ Ø¨Ø¬ÙˆØ§Ø± Ø§Ù„Ù…Ø³Ø¬Ø¯ Ø§Ù„Ù†Ø¨ÙˆÙŠ Ø§Ù„Ø´Ø±ÙŠÙØŒ Ø§Ù„Ù‡Ø¯ÙˆØ¡ ÙˆØ§Ù„Ø³ÙƒÙŠÙ†Ø© ÙŠÙ…Ù„Ø£Ø§Ù† Ø§Ù„Ù…ÙƒØ§Ù†. Ø§Ù„Ø®Ø¯Ù…Ø© ÙƒØ§Ù†Øª Ø³Ø±ÙŠØ¹Ø© ÙˆÙ…Ù†Ø¸Ù…Ø© Ø¬Ø¯Ø§Ù‹.", rating: 5 },
    { text: "Ø¥Ù‚Ø§Ù…Ø© Ø·ÙŠØ¨Ø© ÙˆÙ…Ø¨Ø§Ø±ÙƒØ©ØŒ Ø§Ù„ØºØ±ÙØ© ÙƒØ§Ù†Øª Ù‡Ø§Ø¯Ø¦Ø© ØªÙ…Ø§Ù…Ø§Ù‹ ÙˆÙ…Ø±ÙŠØ­Ø© Ù„Ù„Ù†ÙˆÙ…. Ø·Ø§Ù‚Ù… Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ ØªØ¹Ø§Ù…Ù„Ù‡Ù… ÙÙŠ ØºØ§ÙŠØ© Ø§Ù„Ø±Ù‚ÙŠ ÙˆØ§Ù„Ø±Ø­Ø§Ø¨Ø©.", rating: 5 },
    { text: "ÙÙ†Ø¯Ù‚ Ù…ØªÙ…ÙŠØ² Ø¬Ø¯Ø§Ù‹ØŒ Ø§Ù„Ø¥ÙØ·Ø§Ø± ÙƒØ§Ù† ØºÙ†ÙŠØ§Ù‹ Ø¨Ø§Ù„Ø£ØµÙ†Ø§Ù Ø§Ù„Ù…Ø­Ù„ÙŠØ© ÙˆØ§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©. Ø§Ù„Ø¥Ø·Ù„Ø§Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†Ø§Ø¦Ø± ÙƒØ§Ù†Øª ØªØ´Ø±Ø­ Ø§Ù„ØµØ¯Ø±.", rating: 5 },
    { text: "Ø§Ø³ØªÙ…ØªØ¹Øª Ø¬Ø¯Ø§Ù‹ Ø¨Ø§Ù„Ø¥Ù‚Ø§Ù…Ø©ØŒ Ø§Ù„Ù†Ø¸Ø§ÙØ© ÙƒØ§Ù†Øª Ø¹Ù„Ù‰ Ø£Ø¹Ù„Ù‰ Ù…Ø³ØªÙˆÙ‰ ÙˆØ§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø¨Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆØ§Ø¶Ø­ ÙÙŠ ÙƒÙ„ Ø±ÙƒÙ† Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„ÙÙ†Ø¯Ù‚.", rating: 4 },
    { text: "Ù…Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª ÙÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©ØŒ Ø§Ù„Ù‚Ø±Ø¨ Ù…Ù† Ø¨Ø§Ø¨ Ø§Ù„Ø³Ù„Ø§Ù… Ø³Ù‡Ù„ Ø¹Ù„ÙŠÙ†Ø§ Ø§Ù„Ø²ÙŠØ§Ø±Ø© ÙˆØ§Ù„ØµÙ„Ø§Ø© ÙƒØ«ÙŠØ±Ø§Ù‹. Ø³Ø£Ø¹ÙˆØ¯ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø¨ÙƒÙ„ ØªØ£ÙƒÙŠØ¯.", rating: 5 },
    { text: "ÙÙ†Ø¯Ù‚ Ø±Ø§Ø¦Ø¹ ÙˆØ®Ø¯Ù…Ø§ØªÙ‡ Ù…ØªÙƒØ§Ù…Ù„Ø©ØŒ Ø§Ù„Ù…ØµØ§Ø¹Ø¯ Ø³Ø±ÙŠØ¹Ø© Ø¬Ø¯Ø§Ù‹ ÙˆÙ„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆÙ‚Øª Ø§Ù†ØªØ¸Ø§Ø± Ø·ÙˆÙŠÙ„. Ø§Ù„ØºØ±Ù Ø­Ø¯ÙŠØ«Ø© ÙˆÙ…Ø¬Ù‡Ø²Ø© Ø¨Ø´ÙƒÙ„ Ù…Ø±ÙŠØ­.", rating: 4 },
    { text: "ØªØ¬Ø±Ø¨Ø© Ø±ÙˆØ­Ø§Ù†ÙŠØ© Ø±Ø§Ø¦Ø¹Ø© Ø¹Ø²Ø²Ù‡Ø§ Ø­Ø³Ù† Ø§Ù„Ø¶ÙŠØ§ÙØ© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„ÙÙ†Ø¯Ù‚. Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù…Ø«Ø§Ù„ÙŠ ÙˆØ§Ù„Ù…ÙˆØ¸ÙÙˆÙ† ÙŠØ¨Ø°Ù„ÙˆÙ† Ù‚ØµØ§Ø±Ù‰ Ø¬Ù‡Ø¯Ù‡Ù… Ù„Ø±Ø§Ø­Ø© Ø§Ù„Ù†Ø²Ù„Ø§Ø¡.", rating: 5 },
    { text: "Ø¥Ù‚Ø§Ù…Ø© Ù…Ø±ÙŠØ­Ø© Ø¬Ø¯Ø§Ù‹ØŒ Ø§Ù„Ø¹Ø²Ù„ Ø§Ù„ØµÙˆØªÙŠ ÙÙŠ Ø§Ù„ØºØ±Ù Ù…Ù…ØªØ§Ø² Ù…Ù…Ø§ ÙˆÙØ± Ù„Ù†Ø§ Ù‡Ø¯ÙˆØ¡Ø§Ù‹ ØªØ§Ù…Ø§Ù‹. Ø§Ù„Ù‚Ù‡ÙˆØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙÙŠ Ø§Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ ÙƒØ§Ù†Øª Ù„Ù…Ø³Ø© Ø·ÙŠØ¨Ø©.", rating: 5 },
    { text: "ÙÙ†Ø¯Ù‚ Ø±Ø§Ù‚ÙŠ ÙˆÙ…Ù†Ø¸Ù…ØŒ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª ÙƒØ§Ù†Øª Ø³Ù„Ø³Ø© Ø¬Ø¯Ø§Ù‹ ÙˆØ§Ù„Ø®Ø¯Ù…Ø© ÙÙŠ Ø§Ù„ØºØ±Ù Ø³Ø±ÙŠØ¹Ø© ÙˆÙ…Ù‡Ù†ÙŠØ©. Ø´ÙƒØ±Ø§Ù‹ Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…ØªÙ…ÙŠØ².", rating: 4 },
    { text: "Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø±Ø§Ø¦Ø¹ Ø¬Ø¯Ø§Ù‹ ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù‚Ø±ÙŠØ¨Ø© Ù…Ù† Ø§Ù„ÙÙ†Ø¯Ù‚ Ù…ØªÙƒØ§Ù…Ù„Ø©. Ø´Ø¹Ø±Øª Ø¨Ø±Ø§Ø­Ø© Ù†ÙØ³ÙŠØ© ÙƒØ¨ÙŠØ±Ø© Ø®Ù„Ø§Ù„ ÙØªØ±Ø© Ø¥Ù‚Ø§Ù…ØªÙŠ.", rating: 5 }
];

const guestNames = [
    "Ù…Ù†ØµÙˆØ± Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ", "Ù„ÙŠÙ†Ø§ Ø§Ù„ØºØ§Ù…Ø¯ÙŠ", "ÙÙ‡Ø¯ Ø§Ù„Ø´Ù…Ø±ÙŠ", "Ù…Ù‡Ø§ Ø§Ù„Ø¹Ù†Ø²ÙŠ",
    "Ø³Ù„Ø·Ø§Ù† Ø§Ù„Ø±Ø´ÙŠØ¯ÙŠ", "Ø®Ù„ÙˆØ¯ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ", "Ø¨Ù†Ø¯Ø± Ø§Ù„Ø­Ø±Ø¨ÙŠ", "Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ø³Ø¨ÙŠØ¹ÙŠ",
    "ÙÙŠØµÙ„ Ø§Ù„Ø¬Ù‡Ù†ÙŠ", "Ø£Ù…Ù„ Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ", "ØªØ±ÙƒÙŠ Ø§Ù„Ø±ÙˆÙŠÙ„ÙŠ", "Ø¬ÙˆØ§Ù‡Ø± Ø§Ù„Ø´Ù‡Ø±ÙŠ"
];

async function seedMadinahReviews() {
    console.log("ðŸš€ Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ ØªÙˆÙ„ÙŠØ¯ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„ÙÙ†Ø§Ø¯Ù‚ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©...");

    const targetCities = ['madinah', 'Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©'];

    const hotels = await prisma.hotel.findMany({
        where: {
            city: { in: targetCities }
        }
    });

    console.log(`ðŸ¨ ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${hotels.length} ÙÙ†Ø¯Ù‚ ÙÙŠ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©.`);

    for (const hotel of hotels) {
        // Randomly pick 3 to 4 reviews
        const numReviews = Math.floor(Math.random() * 2) + 3; // 3 or 4
        const shuffled = [...reviewTemplates].sort(() => 0.5 - Math.random());
        const selectedTemplates = shuffled.slice(0, numReviews);

        for (const template of selectedTemplates) {
            const randomName = guestNames[Math.floor(Math.random() * guestNames.length)];
            const randomDate = new Date(Date.now() - Math.floor(Math.random() * 180) * 24 * 60 * 60 * 1000).toISOString().split('T')[0];

            await prisma.review.create({
                data: {
                    hotelId: hotel.id,
                    userName: randomName,
                    rating: template.rating,
                    text: template.text,
                    date: randomDate
                }
            });
        }

        // Update hotel review count
        await prisma.hotel.update({
            where: { id: hotel.id },
            data: { reviews: numReviews }
        });

        console.log(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© ${numReviews} ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù„Ù„ÙÙ†Ø¯Ù‚: ${hotel.name}`);
    }

    console.log("ðŸŽ‰ Ø§ÙƒØªÙ…Ù„Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØºØ·ÙŠØ© Ø¨Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…ØµØ·ÙÙ‰ ï·º!");
}

seedMadinahReviews()
    .catch(console.error)
    .finally(() => prisma.$disconnect());
