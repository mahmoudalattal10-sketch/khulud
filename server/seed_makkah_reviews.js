const { PrismaClient } = require('@prisma/client');
const prisma = new PrismaClient();

const reviewTemplates = [
    { text: "Ø£ÙƒØ«Ø± Ù…Ø§ ÙŠÙ…ÙŠØ² Ø§Ù„ÙÙ†Ø¯Ù‚ Ù‡Ùˆ Ø§Ù„Ù‚Ø±Ø¨ Ø§Ù„Ø´Ø¯ÙŠØ¯ Ù…Ù† Ø³Ø§Ø­Ø§Øª Ø§Ù„Ø­Ø±Ù…ØŒ Ù…Ù…Ø§ ÙŠØ³Ù‡Ù„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„ØµÙ„Ø§Ø© ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª. Ø·Ø§Ù‚Ù… Ø§Ù„Ø¹Ù…Ù„ Ù…ØªØ¹Ø§ÙˆÙ† Ø¬Ø¯Ø§Ù‹ ÙˆØ§Ù„Ø®Ø¯Ù…Ø© Ø³Ø±ÙŠØ¹Ø©.", rating: 5 },
    { text: "ØªØ¬Ø±Ø¨Ø© Ø¥Ù‚Ø§Ù…Ø© Ù…Ù…ØªØ§Ø²Ø©ØŒ Ø§Ù„ØºØ±Ù ÙˆØ§Ø³Ø¹Ø© ÙˆÙ†Ø¸ÙŠÙØ© ÙˆØ§Ù„Ø³Ø±ÙŠØ± Ù…Ø±ÙŠØ­ Ø¬Ø¯Ø§Ù‹. Ø§Ù„Ø¥ÙØ·Ø§Ø± Ù…ØªÙ†ÙˆØ¹ ÙˆÙŠÙ†Ø§Ø³Ø¨ ÙƒØ§ÙØ© Ø§Ù„Ø£Ø°ÙˆØ§Ù‚. Ø§Ù„Ø¹Ø²Ù„ Ø§Ù„ØµÙˆØªÙŠ ÙÙŠ Ø§Ù„ØºØ±Ù Ù…Ù…ØªØ§Ø².", rating: 5 },
    { text: "ÙÙ†Ø¯Ù‚ Ø±Ø§Ù‚ÙŠ ÙˆØ®Ø¯Ù…Ø© Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ø¨ÙƒÙ„ Ø§Ù„Ù…Ù‚Ø§ÙŠÙŠØ³. Ø³Ø±Ø¹Ø© ÙÙŠ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø®Ø±ÙˆØ¬. Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠ ÙˆÙŠØ³Ù‡Ù„ Ø§Ù„ÙˆØµÙˆÙ„ Ù…Ù†Ù‡ ÙˆØ¥Ù„ÙŠÙ‡.", rating: 4 },
    { text: "Ø¥Ù‚Ø§Ù…Ø© Ù…Ø±ÙŠØ­Ø© Ø¬Ø¯Ø§Ù‹ ÙˆÙ‡Ø§Ø¯Ø¦Ø©ØŒ Ø£Ø¹Ø¬Ø¨Ù†ÙŠ Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø¨Ø£Ø¯Ù‚ Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙÙŠ Ù†Ø¸Ø§ÙØ© Ø§Ù„ØºØ±Ù. Ø§Ù„Ø¥Ø·Ù„Ø§Ù„Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø±Ù… ÙƒØ§Ù†Øª Ù…Ø°Ù‡Ù„Ø© ÙˆØªØ³ØªØ­Ù‚ Ø§Ù„ØªØ¬Ø±Ø¨Ø©.", rating: 5 },
    { text: "Ù…Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª ÙÙŠ Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©. Ø§Ù„ÙÙ†Ø¯Ù‚ ÙŠÙˆÙØ± Ø±Ø§Ø­Ø© ØªØ§Ù…Ø© Ù„Ù„Ù…Ø¹ØªÙ…Ø±ÙŠÙ†ØŒ ÙˆØ§Ù„Ù…ØµØ§Ø¹Ø¯ Ù…ØªÙˆÙØ±Ø© Ø¨ÙƒØ«Ø±Ø© Ù…Ù…Ø§ ÙŠÙ‚Ù„Ù„ ÙˆÙ‚Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±.", rating: 4 },
    { text: "ØªØ¹Ø§Ù…Ù„ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† ÙÙŠ ØºØ§ÙŠØ© Ø§Ù„Ø±Ù‚ÙŠ ÙˆØ§Ù„Ø£Ø¯Ø¨. Ø§Ù„ØºØ±Ù Ø­Ø¯ÙŠØ«Ø© ÙˆÙ…Ø¬Ù‡Ø²Ø© Ø¨ÙƒÙ„ Ù…Ø§ ÙŠØ­ØªØ§Ø¬Ù‡ Ø§Ù„Ù†Ø²ÙŠÙ„. Ø³Ø£ÙƒØ±Ø± Ø§Ù„Ø²ÙŠØ§Ø±Ø© Ø¨Ø§Ù„ØªØ£ÙƒÙŠØ¯ ÙÙŠ Ø§Ù„Ù…Ø±Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©.", rating: 5 },
    { text: "Ù…ÙˆÙ‚Ø¹ Ø§Ù„ÙÙ†Ø¯Ù‚ Ø±Ø§Ø¦Ø¹ Ø¬Ø¯Ø§Ù‹ ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª Ø­ÙˆÙ„Ù‡ Ù…ØªÙˆÙØ±Ø©. Ø§Ù„Ù†Ø¸Ø§ÙØ© Ù‡ÙŠ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù…ÙƒØ§Ù†ØŒ ÙˆØ§Ù„Ù‡Ø¯ÙˆØ¡ Ø¯Ø§Ø®Ù„ Ø§Ù„ØºØ±Ù Ø±ØºÙ… Ù‚Ø±Ø¨Ù†Ø§ Ù…Ù† Ø§Ù„Ø²Ø­Ø§Ù….", rating: 5 },
    { text: "Ù‚ÙŠÙ…Ø© Ù…Ù‚Ø§Ø¨Ù„ Ø³Ø¹Ø± Ù…Ù…ØªØ§Ø²Ø© Ø¬Ø¯Ø§Ù‹. Ø§Ù„ÙÙ†Ø¯Ù‚ ÙŠÙˆÙØ± Ø­Ø§ÙÙ„Ø§Øª ØªØ±Ø¯Ø¯ÙŠØ© Ù„Ù„Ø­Ø±Ù… ØªØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ù…Ø¯Ø§Ø± Ø§Ù„Ø³Ø§Ø¹Ø©ØŒ Ù…Ù…Ø§ Ø¬Ø¹Ù„ Ø§Ù„ØªÙ†Ù‚Ù„ Ø³Ù‡Ù„Ø§Ù‹ ÙˆÙ…Ø±ÙŠØ­Ø§Ù‹ Ø¬Ø¯Ø§Ù‹.", rating: 4 },
    { text: "ÙÙ†Ø¯Ù‚ Ù…Ù…ÙŠØ² Ø¬Ø¯Ø§Ù‹ Ù„Ù„Ø¹Ø§Ø¦Ù„Ø§ØªØŒ Ø§Ù„ØºØ±Ù Ù…ØªØµÙ„Ø© ÙˆÙˆØ§Ø³Ø¹Ø©. Ø§Ù„Ø§Ù‡ØªÙ…Ø§Ù… Ø¨ØªÙˆÙÙŠØ± Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù‚Ù‡ÙˆØ© ÙˆØ§Ù„Ø´Ø§ÙŠ ÙƒØ§Ù† Ù„Ù…Ø³Ø© Ø±Ø§Ø¦Ø¹Ø©. Ø´ÙƒØ±Ø§Ù‹ Ù„ÙƒÙ„ Ø§Ù„Ù‚Ø§Ø¦Ù…ÙŠÙ† Ø¹Ù„ÙŠÙ‡.", rating: 5 },
    { text: "Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø­Ø§ÙÙ„ ÙˆØ§Ø¨ØªØ³Ø§Ù…Ø© Ø¯Ø§Ø¦Ù…Ø© Ù…Ù† Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†. Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù†Ø¸Ø§ÙØ© ÙÙŠ Ø§Ù„Ø­Ù…Ø§Ù…Ø§Øª ÙˆØ§Ù„ØºØ±Ù Ø¹Ø§Ù„Ù Ø¬Ø¯Ø§Ù‹. Ø¥Ø·Ù„Ø§Ù„Ø© Ø§Ù„Ù…Ø·Ø¹Ù… ÙƒØ§Ù†Øª Ø¬Ù…ÙŠÙ„Ø© Ø¬Ø¯Ø§Ù‹.", rating: 5 }
];

const guestNames = [
    "Ø£Ø­Ù…Ø¯ Ù…Ù†ØµÙˆØ±", "Ø³Ø§Ø±Ø© Ø§Ù„Ù‚Ø­Ø·Ø§Ù†ÙŠ", "Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹Ù„ÙŠ", "ÙØ§Ø·Ù…Ø© Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ",
    "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„Ø´Ù…Ø±ÙŠ", "Ù†ÙˆØ±Ø© Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ", "ÙŠØ­ÙŠÙ‰ Ø§Ù„ÙÙŠÙÙŠ", "Ø±ÙŠÙ… Ø§Ù„Ø¨Ù‚Ù…ÙŠ",
    "Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ", "Ù„ÙŠÙ„Ù‰ Ø§Ù„Ø­Ø±Ø¨ÙŠ", "Ø¹Ù…Ø± Ø§Ù„Ø®Ø·ÙŠØ¨", "Ù‡Ø¯Ù‰ Ø§Ù„Ø³Ù„Ù…ÙŠ"
];

async function seedMakkahReviews() {
    console.log("ðŸš€ Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ ØªÙˆÙ„ÙŠØ¯ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ø­ØªØ±Ø§ÙÙŠØ© Ù„ÙÙ†Ø§Ø¯Ù‚ Ù…ÙƒØ©...");

    const targetCities = ['makkah', 'Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©'];

    const hotels = await prisma.hotel.findMany({
        where: {
            city: { in: targetCities }
        }
    });

    console.log(`ðŸ¨ ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${hotels.length} ÙÙ†Ø¯Ù‚ ÙÙŠ Ù…ÙƒØ©.`);

    for (const hotel of hotels) {
        // Randomly pick 3 to 4 reviews
        const numReviews = Math.floor(Math.random() * 2) + 3; // 3 or 4
        const shuffled = [...reviewTemplates].sort(() => 0.5 - Math.random());
        const selectedTemplates = shuffled.slice(0, numReviews);

        for (const template of selectedTemplates) {
            const randomName = guestNames[Math.floor(Math.random() * guestNames.length)];
            const randomDate = new Date(Date.now() - Math.floor(Math.random() * 180) * 24 * 60 * 60 * 1000).toISOString().split('T')[0];

            await prisma.review.create({
                data: {
                    hotelId: hotel.id,
                    userName: randomName,
                    rating: template.rating,
                    text: template.text,
                    date: randomDate
                }
            });
        }

        // Update hotel review count
        await prisma.hotel.update({
            where: { id: hotel.id },
            data: { reviews: numReviews }
        });

        console.log(`âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© ${numReviews} ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ù„Ù„ÙÙ†Ø¯Ù‚: ${hotel.name}`);
    }

    console.log("ðŸŽ‰ Ø§ÙƒØªÙ…Ù„Øª Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØºØ·ÙŠØ© Ø¨Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©!");
}

seedMakkahReviews()
    .catch(console.error)
    .finally(() => prisma.$disconnect());
