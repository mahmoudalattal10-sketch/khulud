import{c as y,r as o,H as Pe,a as We,j as e,U as ye,X as Ue,g as ts,u as as,d as Be,C as Le,h as Oe,i as U,A as Ne,B as Ie,f as Re,k as ls,F as Te,P as is,l as Ee}from"./index-BnuycFB_.js";import{M as ns}from"./MobileSearchOverlay-f9tqpCIn.js";import{c as $e,M as rs}from"./confetti.module-Fb60ZucG.js";import{C as ge}from"./calendar-BMe2UDs8.js";import{C as Fe,P as ne,S as Ye}from"./search-BTLAkR-M.js";import{C as Ze}from"./chevron-right-BbAb0F-g.js";import{C as Ce,M as fe,B as cs}from"./useFrontendHotels-N_4MiZjj.js";import{L as ds}from"./loader-circle-CRvOquIC.js";import{L as Y}from"./leaflet-src-C4EYqSPV.js";import{M as q}from"./map-pin-DOPbNB_R.js";import{L as os,E as xs,M as ms,C as Je,a as hs,b as ps}from"./moon-1GsVJff9.js";import{S as ie}from"./star-MDrf6UGl.js";import{B as je}from"./bed-double-CBGXJ_5-.js";import{I as we,G as Z}from"./info-DtHom8SN.js";import{M as ke}from"./message-circle-6bvLcKBQ.js";import{a as re,P as Xe,b as Ae,c as Ke,B as Se,C as ve,S as pe,U as Qe,W as qe,K as es,D as fs,G as us}from"./wifi-CMWNzTAD.js";import{C as bs}from"./check-BqLKQ3Qa.js";import{S as gs}from"./shield-check-rBeJKJH1.js";import{L as ze}from"./lock-C05TgmoY.js";import{S as De}from"./sparkles-CTPBaUPN.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=y("Accessibility",[["circle",{cx:"16",cy:"4",r:"1",key:"1grugj"}],["path",{d:"m18 19 1-7-6 1",key:"r0i19z"}],["path",{d:"m5 8 3-3 5.5 3-2.36 3.5",key:"9ptxx2"}],["path",{d:"M4.24 14.5a5 5 0 0 0 6.88 6",key:"10kmtu"}],["path",{d:"M13.76 17.5a5 5 0 0 0-6.88-6",key:"2qq6rc"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=y("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ss=y("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=y("Bath",[["path",{d:"M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"1r8yf5"}],["line",{x1:"10",x2:"8",y1:"5",y2:"7",key:"h5g8z4"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["line",{x1:"7",x2:"7",y1:"19",y2:"21",key:"16jp00"}],["line",{x1:"17",x2:"17",y1:"19",y2:"21",key:"1pxrnk"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=y("Cctv",[["path",{d:"M7 9h.01",key:"19b3jx"}],["path",{d:"M16.75 12H22l-3.5 7-3.09-4.32",key:"1h9vqe"}],["path",{d:"M18 9.5l-4 8-10.39-5.2a2.92 2.92 0 0 1-1.3-3.91L3.69 5.6a2.92 2.92 0 0 1 3.92-1.3Z",key:"q5d122"}],["path",{d:"M2 19h3.76a2 2 0 0 0 1.8-1.1L9 15",key:"19bib8"}],["path",{d:"M2 21v-4",key:"l40lih"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=y("CigaretteOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M12 12H2v4h14",key:"91gsaq"}],["path",{d:"M22 12v4",key:"142cbu"}],["path",{d:"M18 12h-.5",key:"12ymji"}],["path",{d:"M7 12v4",key:"jqww69"}],["path",{d:"M18 8c0-2.5-2-2.5-2-5",key:"1il607"}],["path",{d:"M22 8c0-2.5-2-2.5-2-5",key:"1gah44"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=y("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=y("FireExtinguisher",[["path",{d:"M15 6.5V3a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v3.5",key:"sqyvz"}],["path",{d:"M9 18h8",key:"i7pszb"}],["path",{d:"M18 3h-3",key:"7idoqj"}],["path",{d:"M11 3a6 6 0 0 0-6 6v11",key:"1v5je3"}],["path",{d:"M5 13h4",key:"svpcxo"}],["path",{d:"M17 10a4 4 0 0 0-8 0v10a2 2 0 0 0 2 2h4a2 2 0 0 0 2-2Z",key:"vsjego"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=y("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=y("GlassWater",[["path",{d:"M15.2 22H8.8a2 2 0 0 1-2-1.79L5 3h14l-1.81 17.21A2 2 0 0 1 15.2 22Z",key:"48rfw3"}],["path",{d:"M6 12a5 5 0 0 1 6 0 5 5 0 0 0 6 0",key:"mjntcy"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=y("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=y("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=y("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=y("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=y("ShowerHead",[["path",{d:"m4 4 2.5 2.5",key:"uv2vmf"}],["path",{d:"M13.5 6.5a4.95 4.95 0 0 0-7 7",key:"frdkwv"}],["path",{d:"M15 5 5 15",key:"1ag8rq"}],["path",{d:"M14 17v.01",key:"eokfpp"}],["path",{d:"M10 16v.01",key:"14uyyl"}],["path",{d:"M13 13v.01",key:"1v1k97"}],["path",{d:"M16 10v.01",key:"5169yg"}],["path",{d:"M11 20v.01",key:"cj92p8"}],["path",{d:"M17 14v.01",key:"11cswd"}],["path",{d:"M20 11v.01",key:"19e0od"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=y("Siren",[["path",{d:"M7 18v-6a5 5 0 1 1 10 0v6",key:"pcx96s"}],["path",{d:"M5 21a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-1a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2z",key:"1b4s83"}],["path",{d:"M21 12h1",key:"jtio3y"}],["path",{d:"M18.5 4.5 18 5",key:"g5sp9y"}],["path",{d:"M2 12h1",key:"1uaihz"}],["path",{d:"M12 2v1",key:"11qlp1"}],["path",{d:"m4.929 4.929.707.707",key:"1i51kw"}],["path",{d:"M12 12v6",key:"3ahymv"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=y("Sofa",[["path",{d:"M20 9V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v3",key:"1dgpiv"}],["path",{d:"M2 11v5a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H6v-2a2 2 0 0 0-4 0Z",key:"u5qfb7"}],["path",{d:"M4 18v2",key:"jwo5n2"}],["path",{d:"M20 18v2",key:"1ar1qi"}],["path",{d:"M12 4v9",key:"oqhhn3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=y("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=y("Tv",[["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",ry:"2",key:"10ag99"}],["polyline",{points:"17 2 12 7 7 2",key:"11pgbg"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=y("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=y("VolumeX",[["polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5",key:"16drj5"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=y("Wind",[["path",{d:"M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2",key:"1k4u03"}],["path",{d:"M9.6 4.6A2 2 0 1 1 11 8H2",key:"b7d0fd"}],["path",{d:"M12.6 19.4A2 2 0 1 0 14 16H2",key:"1p5cb3"}]]);/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=y("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Rs=(S,d)=>{const[G,m]=o.useState(null),[b,u]=o.useState([]),[g,O]=o.useState(!0),[D,I]=o.useState(null),N=p=>{if(!p)return[];if(Array.isArray(p))return p;if(typeof p=="string")try{return JSON.parse(p)}catch{return[]}return[]},w=o.useCallback(async()=>{if(!S){I("معرف الفندق غير صالح"),O(!1);return}O(!0),I(null);const p={};d!=null&&d.checkIn&&(p.checkIn=d.checkIn.toISOString()),d!=null&&d.checkOut&&(p.checkOut=d.checkOut.toISOString()),d!=null&&d.guests&&(p.guests=d.guests);try{let v=await Pe.getBySlug(S,p);if(!v.success||!v.data){const h=await Pe.getById(S,p);h.success&&h.data&&(v=h)}if(v.success&&v.data){const h=v.data,a={...h,amenities:Array.isArray(h.amenities)?h.amenities:typeof h.amenities=="string"?N(h.amenities)||[]:[],images:Array.isArray(h.images)?h.images:typeof h.images=="string"?N(h.images)||[]:[],coords:Array.isArray(h.coords)&&h.coords.length===2?h.coords:[21.4225,39.8262],basePrice:Number(h.basePrice)||0,rating:Number(h.rating)||5,id:String(h.id),rooms:Array.isArray(h.rooms)?h.rooms.map(s=>({...s,pricingPeriods:Array.isArray(s.pricingPeriods)?s.pricingPeriods:N(s.pricingPeriods)||[],features:Array.isArray(s.features)?s.features:N(s.features)||[],images:Array.isArray(s.images)?s.images:N(s.images)||[],amenities:Array.isArray(s.amenities)?s.amenities:N(s.amenities)||[]})):[]};m(a),u(a.rooms)}else I(v.error||"فشل في تحميل بيانات الفندق")}catch{I("حدث خطأ في الاتصال بالخادم")}finally{O(!1)}},[S,d==null?void 0:d.checkIn,d==null?void 0:d.checkOut,d==null?void 0:d.guests]);return o.useEffect(()=>{w()},[w]),{hotel:G,rooms:b,loading:g,error:D,refetch:w}},Ts=({hotelId:S,hotelName:d,basePrice:G,onSearch:m,onChange:b})=>{const{searchData:u,updateSearch:g,initializeForBooking:O}=We(),D=new Date;o.useEffect(()=>{},[]);const I=l=>{const f=l instanceof Date&&!isNaN(l.getTime())?new Date(l):new Date(D);return f.setHours(0,0,0,0),f},N=I(u.checkIn),w=u.checkOut?I(u.checkOut):null,p=u.rooms||1,v=u.adults||2,h=u.children,a=u.promoCode,s=u.nights||1,E=l=>g({checkOut:l}),ce=l=>g({rooms:l}),de=l=>g({adults:l}),ee=l=>g({children:l}),ue=l=>g({promoCode:l}),[J,oe]=o.useState(!1),[V,R]=o.useState(!1),[L,xe]=o.useState(new Date),[se,B]=o.useState(!1),[A,me]=o.useState(!1),[k,he]=o.useState(!1),[X,K]=o.useState(null),be=async()=>{if(a.trim()){he(!0),K(null);try{const f=await(await fetch("http://localhost:3001/api/coupons/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:a})})).json();if(f.valid){K({type:"success",text:`تم تطبيق خصم ${f.discount}% بنجاح!`}),g({couponDiscount:f.discount});const c=2*1e3,W=Date.now()+c,ae={startVelocity:20,spread:360,ticks:60,zIndex:1e3},Q=(_,T)=>Math.random()*(T-_)+_,le=setInterval(function(){const _=W-Date.now();if(_<=0)return clearInterval(le);const T=20*(_/c);$e({...ae,particleCount:T,origin:{x:Q(.1,.3),y:Math.random()-.2}}),$e({...ae,particleCount:T,origin:{x:Q(.7,.9),y:Math.random()-.2}})},250)}else K({type:"error",text:f.error||f.message||"الكوبون غير صالح"}),g({couponDiscount:0})}catch{K({type:"error",text:"حدث خطأ أثناء التحقق"}),g({couponDiscount:0})}finally{he(!1)}}},te=o.useRef(null),t=o.useRef(null),i=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],r=["أحد","إثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],x=l=>l?`${l.getDate()} ${i[l.getMonth()]}`:"اختر التاريخ";o.useEffect(()=>{const l=f=>{const c=f.target;if(te.current&&!te.current.contains(c)){if(c instanceof Element&&!document.body.contains(c))return;oe(!1)}if(t.current&&!t.current.contains(c)){if(c instanceof Element&&!document.body.contains(c))return;B(!1)}};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]),o.useEffect(()=>{b&&b({checkIn:N,checkOut:w||new Date(N.getTime()+864e5),nights:s,rooms:p,adults:v,children:h,promoCode:a})},[N,w,p,v,h,a]);const n=l=>{const f=l.getFullYear(),c=l.getMonth(),W=new Date(f,c,1),ae=new Date(f,c+1,0),Q=W.getDay(),le=ae.getDate(),_=[];for(let T=0;T<Q;T++)_.push(null);for(let T=1;T<=le;T++)_.push(T);return _},z=(l,f)=>{const c=new Date(f.getFullYear(),f.getMonth(),l);c.setHours(0,0,0,0),V?c>N?(E(c),R(!1)):c.getTime()===N.getTime()?(g({checkIn:c,checkOut:null}),R(!0)):(g({checkIn:c,checkOut:null}),R(!0)):(g({checkIn:c,checkOut:null}),R(!0))},M=(l,f)=>{const c=new Date(f.getFullYear(),f.getMonth(),l);c.setHours(0,0,0,0);const W=new Date(D);return W.setHours(0,0,0,0),c<W},j=(l,f)=>{const c=new Date(f.getFullYear(),f.getMonth(),l);return c.setHours(0,0,0,0),c.getTime()===N.getTime()||w&&c.getTime()===w.getTime()},P=(l,f)=>{if(!w)return!1;const c=new Date(f.getFullYear(),f.getMonth(),l);return c.setHours(0,0,0,0),c>N&&c<w},F=()=>{m&&m({checkIn:N,checkOut:w||new Date(N.getTime()+864e5),nights:s,rooms:p,adults:v,children:h,promoCode:a})},$=()=>{xe(new Date(L.getFullYear(),L.getMonth()-1,1))},C=()=>{xe(new Date(L.getFullYear(),L.getMonth()+1,1))},H=new Date(L.getFullYear(),L.getMonth()+1,1);return e.jsxs("div",{className:"w-full mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-black text-text",children:"ابدأ حجزك الآن"}),s>0&&e.jsxs("span",{className:"bg-slate-100/50 text-[#0f172a] px-3 py-1 rounded-full text-sm font-bold",children:[s," ",s===1?"ليلة":s===2?"ليلتين":s<=10?"ليالي":"ليلة"]})]}),e.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm relative",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 divide-y md:divide-y-0 md:divide-x md:divide-x-reverse divide-slate-100",children:[e.jsxs("div",{className:"md:col-span-2",ref:te,children:[e.jsxs("button",{type:"button",onClick:()=>{oe(!J),R(!1)},className:"w-full flex items-center gap-4 p-4 hover:bg-slate-50 transition-colors text-right",children:[e.jsx("div",{className:"w-12 h-12 bg-[#0f172a]/10 rounded-xl flex items-center justify-center shrink-0",children:e.jsx(ge,{size:22,className:"text-[#0f172a]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-slate-400 font-bold mb-1",children:"تواريخ الإقامة"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{children:e.jsx("span",{className:"text-base font-black text-text",children:x(N)})}),e.jsx("span",{className:"text-slate-300",children:"←"}),e.jsx("div",{children:e.jsx("span",{className:"text-base font-black text-text",children:x(w)})})]})]}),e.jsx(Fe,{size:18,className:`text-slate-400 transition-transform ${J?"rotate-180":""}`})]}),J&&e.jsxs("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-4 bg-white rounded-[3rem] border border-slate-100 shadow-[0_30px_100px_-10px_rgba(0,0,0,0.15)] p-10 z-[1000] w-[95vw] md:w-[850px] md:max-w-[calc(100vw-40px)] animate-in fade-in zoom-in duration-300",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12 relative",children:[e.jsx("button",{type:"button",onClick:$,className:"absolute -right-4 top-0 z-10 w-12 h-12 rounded-full bg-white shadow-lg border border-slate-50 flex items-center justify-center text-slate-400 hover:text-gold transition-all active:scale-90",children:e.jsx(Ze,{size:24})}),e.jsx("button",{type:"button",onClick:C,className:"absolute -left-4 top-0 z-10 w-12 h-12 rounded-full bg-white shadow-lg border border-slate-50 flex items-center justify-center text-slate-400 hover:text-gold transition-all active:scale-90",children:e.jsx(Ce,{size:24})}),[L,H].map((l,f)=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"text-xl font-black text-text",children:[i[l.getMonth()]," ",l.getFullYear()]})}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:r.map(c=>e.jsx("div",{className:"text-center text-[10px] font-black text-slate-400/60 py-1 uppercase tracking-widest",children:c.charAt(0)},c))}),e.jsx("div",{className:"grid grid-cols-7 gap-y-1",children:n(l).map((c,W)=>{c&&new Date(l.getFullYear(),l.getMonth(),c);const ae=c?j(c,l):!1,Q=c?P(c,l):!1,le=c?M(c,l):!0;return e.jsxs("div",{className:"relative py-0.5",children:[c!==null&&e.jsx("button",{type:"button",onClick:()=>z(c,l),disabled:le,className:`w-full aspect-square flex items-center justify-center rounded-full text-[13px] font-black transition-all relative z-10
                                                                        ${ae?"bg-[#0f172a] text-white shadow-lg shadow-slate-900/30":Q?"text-[#0f172a] hover:bg-slate-50 font-black":le?"text-slate-100 cursor-not-allowed":"text-text hover:bg-slate-50"}`,children:c}),Q&&c!==null&&e.jsx("div",{className:"absolute inset-y-0 inset-x-0 bg-[#0f172a]/5 z-0"})]},W)})})]},f)),e.jsx("div",{className:"hidden md:block absolute left-1/2 top-10 bottom-10 w-px bg-slate-50 -translate-x-1/2"})]}),e.jsxs("div",{className:"mt-12 flex flex-col items-center gap-6",children:[e.jsx("button",{type:"button",onClick:()=>{if(V&&!u.checkOut){const l=new Date(N);l.setDate(l.getDate()+1),g({checkOut:l})}oe(!1),R(!1)},className:"bg-[#0f172a] text-white px-12 py-4 rounded-full font-black text-sm shadow-xl shadow-slate-900/10 hover:bg-primary active:scale-95 transition-all w-full md:w-auto",children:"تأكيد الإقامة"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${V?"bg-amber-500":"bg-slate-800"}`}),e.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:V?"يرجى تحديد تاريخ المغادرة الآن":"تم تحديد تواريخ الإقامة بنجاح"})]})]})]})]}),e.jsxs("div",{className:"relative",ref:t,children:[e.jsxs("button",{type:"button",onClick:()=>B(!se),className:"w-full flex items-center gap-4 p-4 hover:bg-slate-50 transition-colors text-right",children:[e.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center shrink-0",children:e.jsx(ye,{size:22,className:"text-[#0f172a]"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-xs text-slate-400 font-bold mb-1",children:"الغرف والنزلاء"}),e.jsxs("div",{className:"text-base font-black text-text whitespace-nowrap",children:[p," غرفة · ",v+h," ضيف"]})]}),e.jsx(Fe,{size:18,className:`text-slate-400 transition-transform ${se?"rotate-180":""}`})]}),se&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-2xl border border-slate-200 shadow-2xl p-5 z-[1000]",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[e.jsx("span",{className:"font-bold text-text",children:"الغرف"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>ce(Math.max(1,p-1)),className:"w-9 h-9 rounded-full bg-slate-100 flex items-center justify-center text-slate-600 hover:bg-slate-200 transition-colors",children:e.jsx(fe,{size:16})}),e.jsx("span",{className:"font-black text-text w-8 text-center text-lg",children:p}),e.jsx("button",{type:"button",onClick:()=>ce(p+1),className:"w-9 h-9 rounded-full bg-[#0f172a]/10 flex items-center justify-center text-[#0f172a] hover:bg-[#0f172a]/20 transition-colors",children:e.jsx(ne,{size:16})})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-slate-100",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-text",children:"البالغين"}),e.jsx("span",{className:"text-xs text-slate-400 block",children:"+12 سنة"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>de(Math.max(1,v-1)),className:"w-9 h-9 rounded-full bg-slate-100 flex items-center justify-center text-slate-600 hover:bg-slate-200 transition-colors",children:e.jsx(fe,{size:16})}),e.jsx("span",{className:"font-black text-text w-8 text-center text-lg",children:v}),e.jsx("button",{type:"button",onClick:()=>de(v+1),className:"w-9 h-9 rounded-full bg-[#0f172a]/10 flex items-center justify-center text-[#0f172a] hover:bg-[#0f172a]/20 transition-colors",children:e.jsx(ne,{size:16})})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-bold text-text",children:"الأطفال"}),e.jsx("span",{className:"text-xs text-slate-400 block",children:"0-12 سنة"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>ee(Math.max(0,h-1)),className:"w-9 h-9 rounded-full bg-slate-100 flex items-center justify-center text-slate-600 hover:bg-slate-200 transition-colors",children:e.jsx(fe,{size:16})}),e.jsx("span",{className:"font-black text-text w-8 text-center text-lg",children:h}),e.jsx("button",{type:"button",onClick:()=>ee(h+1),className:"w-9 h-9 rounded-full bg-[#0f172a]/10 flex items-center justify-center text-[#0f172a] hover:bg-[#0f172a]/20 transition-colors",children:e.jsx(ne,{size:16})})]})]}),e.jsx("button",{type:"button",onClick:()=>B(!1),className:"w-full bg-primary text-white py-3 rounded-xl font-bold mt-4 hover:bg-primary transition-colors",children:"تأكيد"})]})]}),e.jsx("div",{className:"flex items-center p-3",children:e.jsxs("button",{onClick:F,className:"w-full bg-[#059669] text-white py-4 rounded-xl font-black text-base hover:bg-[#047857] transition-all shadow-lg shadow-[#059669]/20 hover:scale-[1.02] active:scale-95 flex items-center justify-center gap-2",children:[e.jsx(Ye,{size:20}),e.jsx("span",{children:"بحث عن الغرف"})]})})]})}),e.jsxs("div",{className:"mt-3",children:[A?e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 rounded-xl p-2",children:[e.jsx(_e,{size:16,className:"text-gold mr-2"}),e.jsx("input",{type:"text",value:a,onChange:l=>ue(l.target.value),placeholder:"أدخل كود الخصم",className:"flex-1 bg-transparent text-sm font-bold text-text outline-none placeholder:text-slate-400 uppercase"}),e.jsx("button",{onClick:()=>{me(!1),ue(""),K(null)},className:"w-7 h-7 rounded-full bg-slate-200 flex items-center justify-center text-slate-500 hover:bg-slate-300",children:e.jsx(Ue,{size:14})}),e.jsx("button",{onClick:be,disabled:k||!a,className:"bg-[#0f172a] text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-primary disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:k?e.jsx(ds,{size:14,className:"animate-spin"}):"تطبيق"})]}):e.jsxs("button",{onClick:()=>me(!0),className:"text-sm text-gold font-bold flex items-center gap-1 hover:underline",children:[e.jsx(_e,{size:14}),"هل لديك كود خصم؟"]}),X&&e.jsx("div",{className:`mt-2 text-xs font-bold ${X.type==="success"?"text-primary":"text-red-500"}`,children:X.text})]})]})},Es=({lat:S,lng:d,hotelName:G,distanceFromHaram:m})=>{const b=o.useRef(null),u=o.useRef(null),g=o.useRef(null),[O,D]=o.useState("street"),[I,N]=o.useState(!1),w=typeof S=="string"?parseFloat(S):Number(S),p=typeof d=="string"?parseFloat(d):Number(d),v=!isNaN(w)&&!isNaN(p)&&Math.abs(w)<=90&&Math.abs(p)<=180;o.useEffect(()=>{if(!v||!b.current||u.current||!Y)return;u.current=Y.map(b.current,{center:[w,p],zoom:16,zoomControl:!1,scrollWheelZoom:!1}),Y.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:"&copy; OpenStreetMap &copy; CARTO"}).addTo(u.current),setTimeout(()=>{var E;(E=u.current)==null||E.invalidateSize()},300);const s=Y.divIcon({className:"custom-pin",html:`
                <div class="relative flex items-center justify-center">
                    <div style="background-color: #10b981; width: 40px; height: 40px; border-radius: 50% 50% 50% 0; border: 3px solid white; transform: rotate(-45deg); display: flex; align-items: center; justify-content: center; color: white;">
                        <div style="transform: rotate(45deg);">
                            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                        </div>
                    </div>
                </div>
            `,iconSize:[40,40],iconAnchor:[20,40]});g.current=Y.marker([w,p],{icon:s}).addTo(u.current),g.current.bindPopup(`
            <div style="font-family: 'Cairo', sans-serif; text-align: right; padding: 5px;">
                <div style="font-weight: 900; color: #0f172a; font-size: 14px; margin-bottom: 4px;">${G}</div>
                <div style="font-size: 11px; color: #64748b; font-weight: 700;">${m&&m.includes("من")?m:m?`${m} من الحرم`:"موقع الفندق"}</div>
            </div>
        `,{closeButton:!1}).openPopup(),u.current.on("mousedown",()=>{u.current.scrollWheelZoom.enable()})},[w,p,G,m]),o.useEffect(()=>{u.current&&(u.current.eachLayer(s=>{s instanceof Y.TileLayer&&u.current.removeLayer(s)}),O==="satellite"?Y.tileLayer("https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",{attribution:"&copy; Google Maps"}).addTo(u.current):Y.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:"&copy; OpenStreetMap &copy; CARTO"}).addTo(u.current))},[O]);const h=()=>{window.open(`https://www.google.com/maps/search/?api=1&query=${w},${p}`,"_blank")},a=()=>{N(!I),setTimeout(()=>{u.current&&u.current.invalidateSize({animate:!0})},300)};return e.jsxs("div",{className:`relative bg-slate-100 rounded-3xl overflow-hidden shadow-inner group transition-all duration-500 ${I?"fixed inset-0 z-[9999] rounded-none":"h-64 md:h-80"}`,children:[v?e.jsx("div",{ref:b,className:"w-full h-full z-0"}):e.jsxs("div",{className:"w-full h-full flex items-center justify-center text-slate-400 font-bold text-sm bg-slate-50",children:[e.jsx(q,{size:24,className:"mb-2 opacity-20"}),e.jsx("span",{children:"موقع غير متاح"})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none border-[1px] border-white/20 rounded-3xl z-10"}),e.jsxs("div",{className:"absolute top-4 left-4 right-4 flex justify-between items-start z-[500] pointer-events-none",children:[e.jsxs("div",{className:"flex gap-2 pointer-events-auto",children:[e.jsxs("button",{onClick:()=>D(O==="street"?"satellite":"street"),className:"bg-white/90 backdrop-blur-md px-3 py-2 rounded-xl text-[10px] font-black text-slate-700 shadow-lg border border-white flex items-center gap-2 hover:bg-slate-800 hover:text-white transition-all active:scale-95",children:[e.jsx(os,{size:14}),O==="street"?"قمر صناعي":"عرض الشوارع"]}),e.jsx("button",{onClick:a,className:"bg-white/90 backdrop-blur-md p-2 rounded-xl shadow-lg border border-white flex items-center justify-center hover:bg-primary hover:text-white transition-all active:scale-95",children:I?e.jsx(Ss,{size:16}):e.jsx(Cs,{size:16})})]}),e.jsx("div",{className:"flex flex-col gap-2 items-end pointer-events-auto",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-md px-3 py-1.5 rounded-lg text-[10px] font-bold text-slate-700 shadow-md border border-white flex items-center gap-2",children:[e.jsx(q,{size:12,className:"text-red-500"}),m&&m.includes("من")?m:m?`${m} من الحرم`:"موقع دقيق"]})})]}),e.jsx("div",{className:"absolute bottom-4 right-4 z-[500]",children:e.jsxs("button",{onClick:h,className:"bg-primary border border-primary text-white px-4 py-2 rounded-xl text-[10px] font-black shadow-2xl flex items-center gap-2 hover:bg-primary transition-all active:scale-95 translate-y-2 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 duration-300",children:[e.jsx(xs,{size:12}),"فتح في خرائط Google"]})}),!I&&e.jsx("div",{className:"absolute bottom-4 left-4 z-[500] pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"bg-primary/20 backdrop-blur-sm text-white px-2 py-1 rounded text-[8px] font-bold",children:"انقر للتفاعل والتكبير"})})]})},$s=[{category:"أبرز المرافق",icon:e.jsx(ie,{className:"w-5 h-5 text-[#D6B372]"}),items:[{name:"واي فاي مجاني",icon:e.jsx(Ke,{size:16})},{name:"حمّام خاص",icon:e.jsx(He,{size:16})},{name:"غرف عائلية",icon:e.jsx(ye,{size:16})},{name:"موقف سيارات",icon:e.jsx(Ae,{size:16})},{name:"مطعم",icon:e.jsx(re,{size:16})},{name:"خدمة الغرف",icon:e.jsx(Se,{size:16})},{name:"غرف لغير المدخنين",icon:e.jsx(Ns,{size:16})},{name:"مرافق لذوي الاحتياجات الخاصة",icon:e.jsx(js,{size:16})}]},{category:"مرافق الغرفة",icon:e.jsx(je,{className:"w-5 h-5 text-[#0f172a]"}),items:[{name:"تكييف",icon:e.jsx(Ge,{size:16})},{name:"تلفزيون بشاشة مسطحة",icon:e.jsx(Ds,{size:16})},{name:"عازل للصوت",icon:e.jsx(Os,{size:16})},{name:"غلاية كهربائية",icon:e.jsx(ve,{size:16})},{name:"مقبس بجانب السرير",icon:e.jsx(Ve,{size:16})},{name:"خزانة",icon:e.jsx(ze,{size:16})},{name:"منطقة معيشة",icon:e.jsx(Bs,{size:16})},{name:"مكتب",icon:e.jsx(Ie,{size:16})}]},{category:"الحمام",icon:e.jsx(He,{className:"w-5 h-5 text-[#0f172a]"}),items:[{name:"لوازم استحمام مجانية",icon:e.jsx(ws,{size:16})},{name:"دش",icon:e.jsx(As,{size:16})},{name:"مرحاض",icon:e.jsx(ls,{size:16})},{name:"مناشف",icon:e.jsx(pe,{size:16})},{name:"نعال",icon:e.jsx(zs,{size:16})},{name:"ورق حمام",icon:e.jsx(Te,{size:16})},{name:"مجفف شعر",icon:e.jsx(Ge,{size:16})}]},{category:"ميديا وتكنولوجيا",icon:e.jsx(Me,{className:"w-5 h-5 text-[#0f172a]"}),items:[{name:"تلفزيون",icon:e.jsx(Me,{size:16})},{name:"قنوات فضائية",icon:e.jsx(Me,{size:16})},{name:"هاتف",icon:e.jsx(is,{size:16})}]},{category:"مأكولات ومشروبات",icon:e.jsx(Ls,{className:"w-5 h-5 text-[#D6B372]"}),items:[{name:"مقهى في الموقع",icon:e.jsx(ve,{size:16})},{name:"فواكه",icon:e.jsx(re,{size:16})},{name:"وجبات أطفال",icon:e.jsx(ss,{size:16})},{name:"ميني بار",icon:e.jsx(Ms,{size:16})},{name:"آلة صنع الشاي / القهوة",icon:e.jsx(ve,{size:16})},{name:"طاولات طعام",icon:e.jsx(re,{size:16})}]},{category:"خدمات استقبال",icon:e.jsx(Se,{className:"w-5 h-5 text-[#0f172a]"}),items:[{name:"مكتب استقبال على مدار 24 ساعة",icon:e.jsx(Je,{size:16})},{name:"تسجيل سريع للوصول والمغادرة",icon:e.jsx(Ve,{size:16})},{name:"خدمة كونسيرج",icon:e.jsx(Qe,{size:16})},{name:"خزائن",icon:e.jsx(ze,{size:16})},{name:"يمكن طلب فاتورة",icon:e.jsx(Te,{size:16})}]},{category:"خدمات تنظيف",icon:e.jsx(De,{className:"w-5 h-5 text-[#0f172a]"}),items:[{name:"خدمة تنظيف يومية",icon:e.jsx(De,{size:16})},{name:"ضاغط للسراويل",icon:e.jsx(pe,{size:16})},{name:"خدمة كي الملابس",icon:e.jsx(pe,{size:16})},{name:"التنظيف الجاف للملابس",icon:e.jsx(pe,{size:16})},{name:"مرافق غسيل الملابس",icon:e.jsx(qe,{size:16})}]},{category:"الأمان والحماية",icon:e.jsx(Ee,{className:"w-5 h-5 text-[#0f172a]"}),items:[{name:"طفايات حريق",icon:e.jsx(ks,{size:16})},{name:"أجهزة إنذار الدخان",icon:e.jsx(Ps,{size:16})},{name:"أمن على مدار الساعة",icon:e.jsx(Ee,{size:16})},{name:"بطاقات مفاتيح الدخول",icon:e.jsx(es,{size:16})},{name:"صندوق الأمانات",icon:e.jsx(ze,{size:16})},{name:"كاميرات دوائر تلفزيونية",icon:e.jsx(ys,{size:16})}]},{category:"لغات التحدث",icon:e.jsx(Z,{className:"w-5 h-5 text-blue-600"}),items:[{name:"العربية",icon:e.jsx(Z,{size:16})},{name:"الإنجليزية",icon:e.jsx(Z,{size:16})},{name:"الفرنسية",icon:e.jsx(Z,{size:16})},{name:"التركية",icon:e.jsx(Z,{size:16})},{name:"الأردوية",icon:e.jsx(Z,{size:16})},{name:"الإندونيسية",icon:e.jsx(Z,{size:16})}]}],Fs={wifi:"واي فاي مجاني",parking:"مواقف سيارات",pool:"مسبح فندقي",gym:"نادي رياضي",food:"مطعم فاخر",shuttle:"نقل للحرم 24/7",spa:"مركز سبا وعافية",room_service:"خدمة غرف 24/7",kids_club:"نادي أطفال",business:"مركز أعمال",laundry:"خدمة غسيل",concierge:"كونسيرج",cafe:"مقهى",valet:"صف سيارات"},Hs=S=>{if(!S||typeof S!="string")return{name:"مرفق",icon:e.jsx(Re,{size:20})};const d=S.toLowerCase();let G=Fs[d]||S,m=e.jsx(Re,{size:20});return d.includes("wifi")?m=e.jsx(Ke,{size:20}):d.includes("parking")?m=e.jsx(Ae,{size:20}):d.includes("pool")?m=e.jsx(qe,{size:20}):d.includes("gym")?m=e.jsx(fs,{size:20}):d.includes("food")||d.includes("restaurant")?m=e.jsx(re,{size:20}):d.includes("shuttle")||d.includes("transport")?m=e.jsx(Xe,{size:20}):d.includes("spa")?m=e.jsx(De,{size:20}):d.includes("room_service")?m=e.jsx(Se,{size:20}):d.includes("kids")?m=e.jsx(us,{size:20}):d.includes("business")?m=e.jsx(Ie,{size:20}):d.includes("laundry")?m=e.jsx(pe,{size:20}):d.includes("concierge")?m=e.jsx(Qe,{size:20}):d.includes("cafe")?m=e.jsx(ve,{size:20}):d.includes("valet")&&(m=e.jsx(es,{size:20})),{name:G,icon:m}},ct=()=>{var be,te;const{id:S}=ts(),d=as(),[G,m]=o.useState(!1),[b,u]=o.useState(null),[g,O]=o.useState({}),[D,I]=o.useState({}),[N,w]=o.useState(1),p=Be.useRef(null),v=Be.useRef(null),h=()=>{if(p.current){const t=p.current.scrollLeft,i=p.current.clientWidth,r=Math.round(t/i)+1;w(r)}},{searchData:a}=We(),{hotel:s,rooms:E,loading:ce,error:de,refetch:ee}=Rs(S,{checkIn:a.hasSearched?a.checkIn:void 0,checkOut:a.hasSearched?a.checkOut:void 0,guests:a.hasSearched?(a.adults||0)+(a.children||0):void 0}),[ue,J]=o.useState(!1),[oe,V]=o.useState(!1),[R,L]=o.useState(0);o.useEffect(()=>{window.scrollTo(0,0),u(null);const t=()=>m(window.scrollY>50);return window.addEventListener("scroll",t,{passive:!0}),()=>window.removeEventListener("scroll",t)},[S]);const xe=o.useMemo(()=>{if(!(s!=null&&s.nearbyLandmarks)||s.nearbyLandmarks.length===0)return[];const t={MapPin:e.jsx(q,{size:18}),Building:e.jsx(cs,{size:18}),Globe:e.jsx(Z,{size:18}),Car:e.jsx(Ae,{size:18}),Plane:e.jsx(Xe,{size:18}),ShoppingBag:e.jsx(Is,{size:18}),Utensils:e.jsx(re,{size:18}),Briefcase:e.jsx(Ie,{size:18})};return s.nearbyLandmarks.map(i=>({name:i.name,distance:i.distance,icon:t[i.icon]||e.jsx(q,{size:18})}))},[s]),se=o.useMemo(()=>!s||!s.amenities?[]:(Array.isArray(s.amenities)?s.amenities:[]).map(i=>Hs(i)),[s]),B=o.useMemo(()=>{if(!s)return[];const t=[s.image,...s.images||[]].filter(i=>i&&typeof i=="string");return Array.from(new Set(t))},[s]),A=o.useMemo(()=>E&&Array.isArray(E)&&E.length>0?E.map((t,i)=>({id:t.id,name:t.name,price:t.price,capacity:t.capacity,size:t.area,bed:t.beds,type:t.type,view:t.view,mealPlan:t.mealPlan,tags:[t.view||"إطلالة على المدينة",t.mealPlan==="breakfast"?"شامل الإفطار":t.mealPlan==="half_board"?"وجبتين":t.mealPlan==="full_board"?"ثلاث وجبات":"بدون وجبات"].filter(Boolean),images:t.images&&t.images.length>0?t.images:[s==null?void 0:s.image].filter(Boolean),pricingPeriods:t.pricingPeriods||[],sofa:t.sofa||!1,amenities:Array.isArray(t.features)?t.features:[],inventory:t.availableStock||0,allowExtraBed:t.allowExtraBed||!1,extraBedPrice:t.extraBedPrice||0,maxExtraBeds:t.maxExtraBeds||1,isVisible:t.isVisible!==!1,partialMetadata:t.partialMetadata,originalIdx:i})):[],[E,s]),me=o.useMemo(()=>{if(!A.length)return[];const t={};return A.filter(r=>{if(r.isVisible===!1)return!1;if(a.adults){const x=(a.adults||0)+(a.children||0),n=Math.ceil(x/(a.rooms||1));return r.capacity>=n}return!0}).forEach(r=>{t[r.name]||(t[r.name]={name:r.name,images:r.images,capacity:r.capacity,size:r.size,bed:r.bed,view:r.view,variants:[]}),t[r.name].variants.push(r)}),Object.values(t).forEach(r=>{r.variants.sort((x,n)=>x.price-n.price)}),Object.values(t)},[A,a]),k=o.useMemo(()=>{let t=0;return Object.entries(D).forEach(([i,r])=>{var z,M;if(r<=0)return;const x=A.find(j=>j.id===i);if(!x)return;let n=0;if((z=x.partialMetadata)!=null&&z.isPartial&&x.partialMetadata.totalPrice){n=x.partialMetadata.totalPrice;const j=g[x.id]||0;n+=j*(x.extraBedPrice||0)*(x.partialMetadata.availableNightsCount||1)}else{let j=x.price;if(a.checkIn){const $=new Date(a.checkIn),C=(M=x.pricingPeriods)==null?void 0:M.find(H=>{const l=new Date(H.startDate),f=new Date(H.endDate);return $>=l&&$<=f});C&&(j=C.price)}const P=g[x.id]||0,F=a.nights||1;n=(j+P*(x.extraBedPrice||0))*F}t+=n*r}),t},[D,g,A,a.checkIn,a.nights]),he=(t,i,r)=>{O(x=>{const n=x[t]||0,z=Math.max(0,Math.min(n+i,r));return{...x,[t]:z}})},X=t=>{var j,P;const i=t!==void 0?t:b;if(i===null){alert("يرجى اختيار غرفة أولاً لإكمال الحجز");return}const r=A[i],x=D[r.id]||0;if(x===0){alert("يرجى اختيار عدد الغرف أولاً");return}let n=r.price,z=a.checkIn,M=a.checkOut;if((j=r.partialMetadata)!=null&&j.isPartial)z=new Date(r.partialMetadata.availableFrom),M=new Date(r.partialMetadata.availableTo),n=r.partialMetadata.avgPrice||r.price;else if(a.checkIn){const F=new Date(a.checkIn),$=(P=r.pricingPeriods)==null?void 0:P.find(C=>{const H=new Date(C.startDate),l=new Date(C.endDate);return F>=H&&F<=l});$&&(n=$.price)}d(`/booking/${s==null?void 0:s.id}`,{state:{roomIdx:i,roomId:r.id,price:n,roomCount:x,extraBedCount:g[r.id]||0,checkIn:z==null?void 0:z.toISOString(),checkOut:M==null?void 0:M.toISOString()}})};if(ce&&!s)return e.jsxs("div",{className:"min-h-screen bg-[#F9FAFB] font-cairo animate-pulse",children:[e.jsx("div",{className:"h-24 md:h-28"}),e.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 md:px-8 py-6",children:[e.jsx("div",{className:"w-full h-[500px] bg-slate-200/50 rounded-[3rem] mb-12"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-8",children:[e.jsx("div",{className:"h-10 w-2/3 bg-slate-200/50 rounded-2xl"}),e.jsx("div",{className:"h-6 w-1/3 bg-slate-200/50 rounded-xl"}),e.jsx("div",{className:"h-96 w-full bg-slate-200/50 rounded-[2rem]"})]}),e.jsx("div",{className:"lg:col-span-4 space-y-6",children:e.jsx("div",{className:"h-80 w-full bg-slate-200/50 rounded-[2.5rem]"})})]})]})]});if(de||!ce&&!s)return e.jsx("div",{className:"min-h-screen bg-[#F9FAFB] font-cairo flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-4 max-w-md mx-auto p-8",children:[e.jsx("div",{className:"w-20 h-20 bg-red-50 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Le,{className:"w-10 h-10 text-red-500"})}),e.jsx("h2",{className:"text-2xl font-bold text-text",children:"عذراً، حدث خطأ"}),e.jsx("p",{className:"text-slate-500",children:de||"لم يتم العثور على الفندق"}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>ee(),className:"px-6 py-3 bg-gold text-white rounded-xl font-bold hover:bg-gold-dark transition-colors",children:"إعادة المحاولة"}),e.jsx("button",{onClick:()=>d("/hotels"),className:"px-6 py-3 bg-slate-100 text-slate-700 rounded-xl font-bold hover:bg-slate-200 transition-colors",children:"العودة للفنادق"})]})]})});const K={"@context":"https://schema.org","@type":"Hotel",name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",image:(s==null?void 0:s.image)||"",address:{"@type":"PostalAddress",addressLocality:(s==null?void 0:s.location)||"",addressCountry:"SA"},starRating:{"@type":"Rating",ratingValue:(s==null?void 0:s.rating)||0},priceRange:`${(s==null?void 0:s.basePrice)||0} SAR`};return e.jsxs(e.Fragment,{children:[e.jsx("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(K)}}),e.jsxs("div",{className:"min-h-screen bg-[#F9FAFB] font-cairo text-text pb-20 animate-fade-in-up",children:[e.jsx("div",{className:"h-24 md:h-28"}),e.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 md:px-8 py-6",children:[e.jsxs("div",{className:"relative group/gallery mb-12 overflow-hidden rounded-[2rem] md:rounded-[3rem] shadow-xl",children:[e.jsxs("div",{className:"hidden md:grid md:grid-cols-4 gap-2 md:gap-3 aspect-[21/10]",dir:"ltr",children:[e.jsxs("div",{className:"md:col-span-2 md:row-span-2 relative overflow-hidden group/main cursor-pointer h-full",children:[e.jsx("img",{src:B[0],alt:s.name,className:"w-full h-full object-cover transition-all duration-1000 group-hover/main:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-secondary/10 opacity-0 group-hover/main:opacity-100 transition-opacity duration-500"})]}),B.slice(1,5).map((t,i)=>e.jsxs("div",{className:"relative overflow-hidden group/tile cursor-pointer h-full",children:[e.jsx("img",{src:t,alt:`Gallery ${i+2}`,className:"w-full h-full object-cover transition-all duration-1000 group-hover/tile:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-secondary/20 opacity-0 group-hover/tile:opacity-100 transition-opacity duration-500"}),i===3&&e.jsxs("button",{onClick:()=>{L(0),V(!0)},className:"absolute bottom-6 right-6 bg-white/90 backdrop-blur-md border border-slate-200 px-5 py-3 rounded-2xl text-secondary font-black text-xs shadow-2xl flex items-center gap-3 hover:bg-white transition-all active:scale-95 z-20 group/btn",children:[e.jsx("div",{className:"grid grid-cols-2 gap-1 group-hover/btn:rotate-12 transition-transform duration-500",children:[...Array(4)].map((r,x)=>e.jsx("div",{className:"w-1.5 h-1.5 bg-gold rounded-full"},x))}),e.jsx("span",{children:"عرض كافة الصور"})]})]},i))]}),e.jsxs("div",{className:"md:hidden relative aspect-[4/3] w-full",dir:"ltr",children:[e.jsx("div",{ref:p,onScroll:h,className:"flex overflow-x-auto snap-x snap-mandatory no-scrollbar h-full w-full",children:B.map((t,i)=>e.jsx("div",{className:"min-w-full h-full snap-center shrink-0",children:e.jsx("img",{src:t,alt:`${s.name} ${i+1}`,className:"w-full h-full object-cover"})},i))}),e.jsxs("div",{className:"absolute bottom-4 right-4 bg-primary/60 backdrop-blur-md px-3 py-1 rounded-lg text-white text-[10px] font-bold tracking-widest z-10 border border-white/10",children:[N," / ",B.length]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"lg:col-span-8 space-y-8",children:[e.jsx("div",{className:"animate-fade-in",style:{animationDelay:"100ms"},children:e.jsx("div",{className:"flex flex-col items-start w-full",children:e.jsxs("div",{className:"flex-1 w-full flex flex-col items-start text-right",children:[e.jsxs("div",{className:"flex items-center justify-start gap-4 mb-4 w-full",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-[#059669] text-white px-4 py-1.5 rounded-xl border border-[#059669] shadow-lg shadow-emerald-500/20 order-2",children:[e.jsx("span",{className:"text-xl font-black leading-none",children:s==null?void 0:s.rating}),e.jsx("div",{className:"w-px h-4 bg-white/20"}),e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider",children:"ممتاز"})]}),e.jsx("div",{className:"flex gap-1 text-gold order-1",children:[...Array(5)].map((t,i)=>e.jsx(ie,{size:24,fill:i<Math.floor((s==null?void 0:s.rating)||4)?"currentColor":"none",strokeWidth:1.5},i))})]}),e.jsx("h1",{className:"text-4xl md:text-6xl font-black text-secondary mb-6 leading-[1.1] tracking-tight w-full drop-shadow-sm",children:s==null?void 0:s.name}),e.jsxs("div",{className:"flex flex-wrap items-center justify-start gap-4 mt-2 w-full text-right",children:[e.jsx("div",{className:"bg-slate-50 border border-slate-100 p-2.5 rounded-2xl text-secondary shrink-0 shadow-sm",children:e.jsx(q,{size:20})}),e.jsx("div",{className:"flex items-center gap-2 text-slate-500 text-base font-bold",children:e.jsx("span",{children:s==null?void 0:s.location})}),e.jsx("span",{className:"text-slate-200",children:"|"}),e.jsx("div",{className:"flex items-center gap-3",children:(()=>{var M;const t=((s==null?void 0:s.city)||"").toLowerCase(),i=parseFloat(((M=s==null?void 0:s.distanceFromHaram)==null?void 0:M.toString().replace(/[^0-9.]/g,""))||"0");let r="عن المركز",x="كم";t.includes("مكة")||t.includes("makkah")||t.includes("mecca")?(r="عن الكعبة",x="متر"):(t.includes("المدينة")||t.includes("madinah")||t.includes("medina"))&&(r="عن المسجد النبوي",x="متر");const z=(i<10?i*1e3:i)<=700;return e.jsxs("div",{className:"flex items-center gap-3",children:[z&&e.jsxs("div",{className:"text-gold px-4 py-2 rounded-2xl text-[11px] font-black flex items-center gap-2 border border-gold/20 bg-gold/5 shadow-sm",children:[e.jsx(ie,{size:14,fill:"currentColor"}),e.jsx("span",{children:"موقع استثنائي"})]}),e.jsxs("div",{className:"px-4 py-2 rounded-2xl text-[11px] font-bold flex items-center gap-2 border border-slate-100 bg-white text-slate-600 shadow-sm",children:[e.jsxs("span",{className:"font-black text-secondary",children:[i," ",x]}),e.jsx("span",{className:"opacity-70 text-slate-400",children:r})]})]})})()})]})]})})}),e.jsxs("div",{className:"animate-fade-in relative z-50",style:{animationDelay:"200ms"},children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(Ts,{hotelId:(s==null?void 0:s.id)||"",hotelName:(s==null?void 0:s.name)||"",basePrice:(s==null?void 0:s.basePrice)||0,onSearch:()=>ee()})}),e.jsxs("button",{onClick:()=>J(!0),className:"md:hidden w-full bg-white border border-slate-200 p-4 rounded-[2.5rem] flex items-center justify-between shadow-sm active:scale-95 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center text-[#0f172a]",children:e.jsx(Ye,{size:20})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"تعديل البحث"}),e.jsxs("p",{className:"text-xs font-black text-text",children:[U(a.checkIn)," - ",U(a.checkOut)]})]})]}),e.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-50 flex items-center justify-center text-slate-400",children:e.jsx(Ce,{size:16})})]})]}),e.jsxs("div",{className:"bg-[#f8fafc] border border-slate-100 rounded-3xl p-5 flex items-center gap-5 hover:border-emerald-500/30 transition-all duration-500 group/badge",children:[e.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl shadow-sm flex items-center justify-center text-emerald-600 shrink-0 group-hover/badge:scale-110 transition-transform duration-500",children:e.jsx(vs,{className:"w-8 h-8 animate-pulse-slow"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-black text-secondary text-lg leading-tight mb-1",children:"إقامة موثقة من ضيافة خلود"}),e.jsx("p",{className:"text-slate-500 text-xs font-bold leading-relaxed",children:"نضمن لك أعلى معايير الجودة والراحة بتفويض مباشر من منصتنا المعتمدة."})]})]}),e.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"200ms"},children:[e.jsxs("h2",{className:"text-2xl font-black text-secondary mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-gold rounded-full"}),"عن الفندق"]}),e.jsx("p",{className:"text-slate-500 leading-relaxed text-base font-medium",children:(s==null?void 0:s.description)||"لا يوجد وصف متاح لهذا الفندق حالياً."})]}),e.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"300ms"},children:[e.jsx("h2",{className:"text-xl font-black text-text mb-6",children:"أبرز المرافق"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-y-6 gap-x-4",children:se.length>0?se.map((t,i)=>e.jsxs("div",{className:"flex items-center gap-3 text-slate-600 hover:text-gold transition-colors cursor-default group",children:[e.jsx("span",{className:"text-slate-400 group-hover:text-gold transition-colors group-hover:scale-110 transform duration-300 block",children:t.icon}),e.jsx("span",{className:"text-sm font-bold",children:t.name})]},i)):e.jsx("div",{className:"col-span-full text-slate-400 text-sm font-medium",children:"لم يتم إضافة مرافق محددة"})})]}),e.jsx("div",{className:"pt-16 mb-12 animate-fade-in",style:{animationDelay:"400ms"},children:e.jsx("div",{className:"flex flex-col gap-6",children:e.jsx("div",{className:"flex items-end justify-between",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h2",{className:"text-4xl font-black text-text tracking-tight",children:"خيارات الإقامة"}),e.jsx("p",{className:"text-slate-500 font-medium",children:"اختر المساحة التي تناسب نمط حياتك"})]})})})}),e.jsx("div",{ref:v,className:"space-y-12 animate-fade-in",style:{animationDelay:"450ms"},children:me.length>0?me.map((t,i)=>{var r,x;return e.jsx("div",{className:"bg-white rounded-[2.5rem] border-2 border-slate-50 shadow-xl overflow-hidden hover:shadow-2xl transition-all duration-700",children:e.jsxs("div",{className:"flex flex-col lg:flex-row",children:[e.jsxs("div",{className:"lg:w-[30%] aspect-square lg:aspect-auto relative overflow-hidden group/img",children:[e.jsx("img",{src:((r=t.images)==null?void 0:r[0])||(s==null?void 0:s.image),alt:t.name,className:"w-full h-full object-cover transition-transform duration-1000 group-hover/img:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/60 via-transparent to-transparent hidden lg:block"}),e.jsx("div",{className:"absolute bottom-6 left-6 lg:left-auto lg:right-6 z-10 flex items-center gap-2",children:e.jsxs("span",{className:"bg-primary/40 backdrop-blur-md px-3 py-1.5 rounded-full text-[10px] font-black text-white border border-white/20",children:["+",((x=t.images)==null?void 0:x.length)||1," صور"]})})]}),e.jsxs("div",{className:"lg:w-[70%] p-6 md:p-8 space-y-8",children:[e.jsx("div",{className:"flex items-center justify-between border-b border-slate-50 pb-6",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl md:text-3xl font-black text-secondary tracking-tight mb-2 flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-gold rounded-full"}),t.name]}),e.jsxs("div",{className:"flex items-center gap-4 text-slate-500 text-xs font-bold",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ye,{size:16,className:"text-gold"}),e.jsxs("span",{children:["حتى ",t.capacity," أشخاص"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(rs,{size:16,className:"text-gold"}),e.jsxs("span",{children:[t.size," م²"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(je,{size:16,className:"text-gold"}),e.jsx("span",{children:t.bed})]})]})]})}),e.jsx("div",{className:"divide-y divide-slate-50",children:t.variants.map(n=>{var F,$;const z=b===n.originalIdx;let M=n.price,j=!1;if(a.checkIn){const C=new Date(a.checkIn),H=(F=n.pricingPeriods)==null?void 0:F.find(l=>{const f=new Date(l.startDate),c=new Date(l.endDate);return C>=f&&C<=c});H&&(M=H.price,j=!0)}const P=g[n.id]||0;return M+=P*(n.extraBedPrice||0),e.jsxs("div",{className:`py-4 md:py-6 flex flex-col gap-4 transition-colors rounded-2xl px-4 -mx-4 group ${z?"bg-gold-50/30":"hover:bg-slate-50/50"}`,children:[(($=n.partialMetadata)==null?void 0:$.isPartial)&&e.jsxs("div",{className:"bg-amber-50/80 border border-amber-100/50 p-4 rounded-3xl flex flex-col sm:flex-row items-center justify-between gap-4 animate-in fade-in slide-in-from-top-2 duration-500",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-white shadow-sm flex items-center justify-center text-amber-500 shrink-0",children:e.jsx(we,{size:20})}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-[13px] font-black text-amber-900 leading-tight mb-0.5",children:"متاح لفترة جزئية فقط"}),e.jsxs("p",{className:"text-[11px] font-bold text-amber-700/80 mb-1",children:["المواعيد المتاحة: من ",U(n.partialMetadata.availableFrom)," إلى ",U(n.partialMetadata.availableTo)]}),e.jsx("p",{className:"text-[10px] font-bold text-amber-600",children:"هل التاريخ لا يناسبك؟ تواصل معنا وسنوفر لك الغرفة المطلوبة."})]})]}),e.jsxs("a",{href:`https://wa.me/966553882445?text=${encodeURIComponent(`السلام عليكم، لم أجد التواريخ المناسبة في فندق ${s==null?void 0:s.name}، غرفة ${n.name}، وأرغب في المساعدة لتوفير فترة أخرى.`)}`,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 bg-amber-500 text-white px-5 py-2.5 rounded-2xl text-[11px] font-black hover:bg-amber-600 transition-all shadow-lg shadow-amber-500/20 active:scale-95 whitespace-nowrap",children:[e.jsx(ke,{size:16}),"اطلب فترتك الآن"]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4 md:gap-8",children:[e.jsx("div",{className:"flex flex-col items-center gap-1.5",children:e.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[D[n.id]>0?e.jsxs("div",{className:"flex items-center bg-white rounded-full border border-slate-100 shadow-sm overflow-hidden h-10 md:h-12",children:[e.jsx("button",{onClick:()=>I(C=>({...C,[n.id]:Math.min((C[n.id]||0)+1,n.inventory)})),className:"w-8 md:w-10 h-full flex items-center justify-center hover:bg-gold-50 text-gold transition-colors",children:e.jsx(ne,{size:14,strokeWidth:3})}),e.jsx("span",{className:"w-8 md:w-10 text-center font-black text-secondary text-xs md:text-sm",children:D[n.id]}),e.jsx("button",{onClick:()=>I(C=>({...C,[n.id]:Math.max(0,(C[n.id]||0)-1)})),className:"w-8 md:w-10 h-full flex items-center justify-center hover:bg-red-50 text-slate-400 transition-colors",children:e.jsx(fe,{size:14,strokeWidth:3})})]}):!a.checkIn||!a.checkOut?e.jsxs("button",{onClick:()=>{window.innerWidth<768?J(!0):window.scrollTo({top:400,behavior:"smooth"})},className:"h-10 md:h-12 px-4 md:px-6 rounded-full border border-amber-200 bg-amber-50 text-amber-700 font-black text-[10px] md:text-xs hover:bg-amber-100 transition-all flex items-center gap-2 active:scale-95 whitespace-nowrap shadow-sm",children:[e.jsx(ge,{size:14,strokeWidth:3}),e.jsx("span",{children:"حدد التاريخ أولاً"})]}):e.jsxs("button",{onClick:()=>{I(C=>({...C,[n.id]:1})),u(n.originalIdx)},className:"h-10 md:h-12 px-4 md:px-6 rounded-full border border-slate-200 bg-white text-secondary font-black text-[10px] md:text-xs hover:bg-secondary hover:border-secondary hover:text-white transition-all flex items-center gap-2 active:scale-95 whitespace-nowrap shadow-sm hover:shadow-secondary/20",children:[e.jsx(ne,{size:14,strokeWidth:3}),e.jsx("span",{children:"إختر"})]}),D[n.id]>0&&e.jsx("button",{onClick:()=>X(n.originalIdx),className:"text-[9px] md:text-[10px] font-black text-gold underline underline-offset-4",children:"تأكيد الحجز"})]})}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("span",{className:`text-2xl md:text-3xl font-black ${j?"text-amber-500":"text-secondary"}`,children:M*(D[n.id]||1)}),e.jsxs("div",{className:"flex flex-col text-[9px] md:text-[10px] font-bold text-slate-400 leading-none",children:[e.jsx("span",{children:"ريال / ليلة"}),e.jsx("span",{children:"شامل الضريبة"})]})]})})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1.5 md:gap-2 text-right",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-700",children:[e.jsx("span",{className:"text-[10px] md:text-xs font-black",children:n.mealPlan==="breakfast"?"شامل الإفطار":n.mealPlan==="half_board"?"إقامة وجبتين":n.mealPlan==="full_board"?"إقامة كاملة":"بدون وجبات"}),e.jsx(re,{size:12,className:"text-gold"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[e.jsx("span",{className:"text-[9px] md:text-[10px] font-bold",children:n.view||"إطلالة مدينة"}),e.jsx(ms,{size:10})]})]})]})]},n.id)})}),t.variants.some(n=>n.allowExtraBed)&&(()=>{const n=t.variants.some(j=>D[j.id]>0),z=t.variants.find(j=>D[j.id]>0)||t.variants.find(j=>j.allowExtraBed)||t.variants[0],M=z.extraBedPrice||0;return e.jsx("div",{className:`bg-slate-50/70 p-4 rounded-[2rem] border border-slate-100 mt-2 transition-all ${n?"":"opacity-50 grayscale pointer-events-none"}`,children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 md:w-10 md:h-10 rounded-xl bg-white shadow-sm flex items-center justify-center text-gold border border-slate-50 shrink-0",children:e.jsx(je,{size:18})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-black text-text text-[11px] md:text-sm leading-tight flex items-center gap-2",children:["سرير إضافي",e.jsx("span",{className:"text-gold px-1.5 py-0.5 bg-gold-50 rounded-lg text-[9px] md:text-[10px]",children:M>0?`+${M} ر.س`:"مجاني"})]}),e.jsx("p",{className:"text-[9px] md:text-[10px] text-slate-400 font-bold whitespace-nowrap",children:n?`حتى ${z.maxExtraBeds} أسرة`:"اختر الغرفة أولاً"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 md:gap-4 dir-ltr bg-white/50 px-3 py-1.5 rounded-2xl border border-slate-100",children:[e.jsx("button",{onClick:()=>n&&he(z.id,1,(s==null?void 0:s.extraBedStock)||2),disabled:!n,className:"w-7 h-7 rounded-lg bg-white border border-slate-100 flex items-center justify-center text-slate-400 hover:text-gold transition-colors disabled:cursor-not-allowed",children:e.jsx(ne,{size:14})}),e.jsx("span",{className:"font-black text-text tabular-nums text-sm",children:Object.entries(g).filter(([j])=>t.variants.some(P=>P.id===j)).reduce((j,[,P])=>j+P,0)}),e.jsx("button",{onClick:()=>{if(!n)return;const j=t.variants.find(P=>g[P.id]>0)||z;he(j.id,-1,(s==null?void 0:s.extraBedStock)||2)},disabled:!n,className:"w-7 h-7 rounded-lg bg-white border border-slate-100 flex items-center justify-center text-slate-400 hover:text-red-500 transition-colors disabled:cursor-not-allowed",children:e.jsx(fe,{size:14})})]})]})})})()]})]})},i)}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-6 bg-white rounded-[2rem] border-2 border-slate-50 shadow-xl text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-amber-50 rounded-full flex items-center justify-center mb-6 text-amber-500",children:e.jsx(Le,{size:40})}),e.jsx("h3",{className:"text-2xl font-black text-text mb-2",children:"عذراً، لا توجد غرف متاحة"}),e.jsx("p",{className:"text-slate-500 max-w-md mx-auto",children:a.hasSearched?"لا توجد غرف تطابق معايير بحثك في التواريخ المختارة. يرجى تجربة تواريخ أخرى أو تقليل عدد الأفراد.":"لا توجد غرف متاحة حالياً في هذا الفندق. يرجى مراجعة إدارة الفندق."}),e.jsx("button",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"mt-8 px-8 py-3 bg-gold text-white rounded-2xl font-black shadow-lg shadow-gold-200 hover:bg-gold-dark transition-all",children:"تغيير تواريخ البحث"})]})}),e.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"525ms"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-black text-text flex items-center gap-2",children:[e.jsx(ke,{className:"text-amber-500"}),"تقييمات الضيوف"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-gold-50 px-3 py-1.5 rounded-full",children:[e.jsx(ie,{className:"text-gold fill-gold",size:14}),e.jsx("span",{className:"text-sm font-black text-gold-dark",children:"4.9 / 5"}),e.jsx("span",{className:"text-[10px] text-gold/60 font-bold",children:"(120 تقييم)"})]})]}),e.jsxs("div",{className:"space-y-4",children:[s!=null&&s.guestReviews&&(s==null?void 0:s.guestReviews.length)>0?s==null?void 0:s.guestReviews.map((t,i)=>e.jsxs("div",{className:"bg-white p-6 rounded-[2rem] border border-slate-100 shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-50 flex items-center justify-center font-black text-slate-400 border border-slate-100 uppercase",children:(t.userName||"G").charAt(0)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-text text-sm",children:t.userName}),e.jsx("span",{className:"text-[10px] text-slate-400 font-medium",children:t.date})]})]}),e.jsx("div",{className:"flex gap-0.5",children:[...Array(5)].map((r,x)=>e.jsx(ie,{size:12,className:x<t.rating?"text-[#F5C34A] fill-[#F5C34A]":"text-slate-200 fill-slate-200"},x))})]}),e.jsx("p",{className:"text-sm text-slate-600 font-medium leading-relaxed",children:t.text})]},t.id||i)):e.jsxs("div",{className:"text-center py-12 bg-slate-50 rounded-[2rem] border border-dashed border-slate-200",children:[e.jsx(ke,{className:"mx-auto text-slate-300 mb-2",size:32}),e.jsx("p",{className:"text-slate-400 font-bold text-sm",children:"لا توجد تقييمات حتى الآن"})]}),e.jsx("button",{className:"w-full py-4 rounded-2xl border border-dashed border-slate-200 text-slate-400 font-bold text-sm hover:bg-slate-50 hover:border-slate-300 transition-all",children:"قراءة جميع التقييمات"})]})]}),e.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"540ms"},children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("h2",{className:"text-2xl font-black text-secondary flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-gold rounded-full"}),"مرافق متوفرة في ",s==null?void 0:s.name]})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:$s.map((t,i)=>e.jsxs("div",{className:"bg-white p-6 rounded-[1.5rem] border border-slate-100 shadow-sm hover:shadow-md transition-all group/card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-slate-50",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-slate-50 flex items-center justify-center group-hover/card:bg-amber-50 group-hover/card:text-amber-500 transition-colors text-slate-400",children:t.icon}),e.jsx("h3",{className:"font-bold text-text",children:t.category})]}),e.jsx("div",{className:"space-y-3",children:t.items.map((r,x)=>e.jsxs("div",{className:"flex items-center gap-3 text-slate-500 text-sm font-medium hover:text-gold transition-colors",children:[e.jsx("span",{className:"text-gold/60",children:r.icon}),e.jsx("span",{children:r.name})]},x))})]},i))})]}),e.jsxs("div",{className:"animate-fade-in",style:{animationDelay:"550ms"},children:[e.jsxs("h2",{className:"text-2xl font-black text-secondary mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-gold rounded-full"}),"السياسات والتعليمات"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-white p-6 rounded-[1.5rem] border border-slate-100 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 shrink-0",children:e.jsx(Je,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-text mb-2",children:"تسجيل الدخول / الخروج"}),e.jsxs("div",{className:"space-y-1 text-sm text-slate-500 font-medium",children:[e.jsx("p",{children:"تسجيل الدخول: من 4:00 مساءً"}),e.jsx("p",{children:"تسجيل الخروج: حتى 12:00 ظهراً"})]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-[1.5rem] border border-slate-100 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 shrink-0",children:e.jsx(ss,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-text mb-2",children:"سياسة الأطفال"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium leading-relaxed",children:"يرحب بالأطفال من جميع الأعمار. الأطفال من سن 11 سنة يعتبرون بالغين في هذا الفندق."})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-[1.5rem] border border-slate-100 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 shrink-0",children:e.jsx(q,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-text mb-2",children:"الموقع"}),e.jsxs("div",{className:"flex items-center gap-2 bg-[#f8fafc] border border-slate-100 px-4 py-2 rounded-2xl shadow-sm hover:border-emerald-500/30 transition-colors cursor-pointer group/loc",onClick:()=>window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent((s==null?void 0:s.name)||"")}+${encodeURIComponent((s==null?void 0:s.location)||"")}`,"_blank"),children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white shadow-sm flex items-center justify-center text-emerald-600 group-hover/loc:scale-110 transition-transform",children:e.jsx(q,{size:16})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-bold text-slate-400 leading-none mb-1",children:"الموقع"}),e.jsx("span",{className:"text-xs font-black text-secondary leading-none",children:s==null?void 0:s.location})]})]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-[1.5rem] border border-slate-100 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 shrink-0",children:e.jsx(hs,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-text mb-2",children:"طرق الدفع المقبولة"}),e.jsxs("div",{className:"flex gap-2 mt-1",children:[e.jsx("div",{className:"w-8 h-5 bg-slate-100 rounded border border-slate-200"}),e.jsx("div",{className:"w-8 h-5 bg-slate-100 rounded border border-slate-200"}),e.jsx("div",{className:"w-8 h-5 bg-slate-100 rounded border border-slate-200"})]})]})]})}),e.jsx("div",{className:"bg-white p-6 rounded-[1.5rem] border border-slate-100 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-slate-400 shrink-0",children:e.jsx(we,{size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-text mb-2",children:"الإلغاء والدفع المسبق"}),e.jsx("p",{className:"text-sm text-slate-500 font-medium leading-relaxed",children:"تختلف سياسات الإلغاء والدفع المسبق حسب نوع الغرفة وموعد الحجز."})]})]})})]})]})]}),e.jsxs("div",{className:"lg:col-span-4 space-y-6",children:[e.jsx(Es,{lat:s.lat||21.4225,lng:s.lng||39.8262,hotelName:s.name,distanceFromHaram:s.distanceFromHaram||void 0}),xe.length>0&&e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-xl shadow-secondary/5 border border-slate-100 animate-fade-in",style:{animationDelay:"250ms"},children:[e.jsxs("h3",{className:"text-sm font-black text-secondary mb-5 flex items-center gap-2",children:[e.jsx(ps,{size:18,className:"text-gold"}),"أماكن قريبة"]}),e.jsx("div",{className:"space-y-4",children:xe.map((t,i)=>e.jsxs("div",{className:"flex items-center justify-between group/item",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-50 flex items-center justify-center text-slate-400 group-hover/item:text-gold group-hover/item:bg-gold-50 transition-all",children:t.icon}),e.jsx("span",{className:"text-xs font-bold text-slate-600 group-hover/item:text-secondary transition-colors",children:t.name})]}),e.jsx("span",{className:"text-[10px] font-black text-slate-400 bg-slate-50 px-3 py-1 rounded-full group-hover/item:bg-gold-50 group-hover/item:text-gold-dark transition-all",children:t.distance})]},i))})]}),e.jsx("div",{className:"sticky top-32 bg-white rounded-[2.5rem] p-0 shadow-2xl shadow-secondary/10 border border-slate-100 overflow-hidden transition-all duration-500 animate-fade-in-up",style:{animationDelay:"200ms"},children:e.jsxs("div",{className:"max-h-[calc(100vh-160px)] overflow-y-auto no-scrollbar",children:[e.jsxs("div",{className:"bg-secondary p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gold/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsxs("div",{className:"relative z-10 flex items-start justify-between",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[e.jsx("span",{className:"text-2xl font-black leading-none",children:(s==null?void 0:s.rating)||"4.5"}),e.jsx(ie,{className:"text-gold fill-gold",size:18})]}),e.jsx("span",{className:"text-[9px] font-bold text-gold/80 uppercase tracking-widest",children:"تقييم استثنائي"})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"text-[10px] text-white/50 block font-bold mb-1.5 uppercase tracking-widest",children:"السعر لليلة الواحدة"}),e.jsxs("div",{className:"flex items-baseline gap-1 dir-rtl",children:[a.couponDiscount&&a.couponDiscount>0?e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-sm line-through text-white/30 decoration-gold/50 decoration-2",children:(k>0?k:(s==null?void 0:s.basePrice)||400).toLocaleString()}),e.jsx("span",{className:"text-5xl font-black text-gold tracking-tighter leading-none",children:Math.round((k>0?k:(s==null?void 0:s.basePrice)||400)*(1-a.couponDiscount/100)).toLocaleString()})]}):e.jsx("span",{className:"text-5xl font-black text-white tracking-tighter leading-none",children:(k>0?k:(s==null?void 0:s.basePrice)||400).toLocaleString()}),e.jsx("div",{className:"flex flex-col ml-1",children:e.jsx("span",{className:"text-[10px] font-black text-white/80",children:"ريال"})})]})]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"border border-slate-100 rounded-[2rem] overflow-hidden mb-5 bg-slate-50/50",children:[e.jsxs("div",{className:"grid grid-cols-2 border-b border-slate-100",children:[e.jsxs("div",{className:"p-4 flex flex-col gap-1 border-l border-slate-100",children:[e.jsx("span",{className:"text-[8px] text-slate-400 font-black uppercase tracking-widest",children:"تاريخ الوصول"}),e.jsx("span",{className:"font-black text-secondary text-xs whitespace-nowrap",children:U(a.checkIn)})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[e.jsx("span",{className:"text-[8px] text-slate-400 font-black uppercase tracking-widest",children:"تاريخ المغادرة"}),e.jsx("span",{className:"font-black text-secondary text-xs whitespace-nowrap",children:U(a.checkOut)})]})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("div",{className:"p-4 flex flex-col gap-1 border-l border-slate-100",children:[e.jsx("span",{className:"text-[8px] text-slate-400 font-black uppercase tracking-widest",children:"الضيوف"}),e.jsxs("span",{className:"font-black text-secondary text-xs whitespace-nowrap",children:[a.adults||1," بالغين، ",a.children||0," أطفال"]})]}),e.jsxs("div",{className:"p-4 flex flex-col gap-1",children:[e.jsx("span",{className:"text-[8px] text-slate-400 font-black uppercase tracking-widest",children:"مدة الإقامة"}),e.jsxs("span",{className:"font-black text-secondary text-xs",children:[a.nights||1," ليلة"]})]})]})]}),!a.checkIn||!a.checkOut?e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-3xl p-5 mb-8 text-center animate-pulse",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-white shadow-sm flex items-center justify-center mx-auto mb-3 text-amber-500",children:e.jsx(ge,{size:20})}),e.jsx("h4",{className:"font-black text-amber-900 text-sm mb-1.5",children:"بانتظار تحديد التاريخ"}),e.jsx("p",{className:"text-[11px] text-amber-700/80 font-bold leading-relaxed px-4",children:"يرجى تحديد تاريخ الوصول والمغادرة أولاً لعرض الأسعار والتوفر"})]}):b===null?e.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-3xl p-5 mb-8 text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-white shadow-sm flex items-center justify-center mx-auto mb-3 text-gold",children:e.jsx(we,{size:20})}),e.jsx("h4",{className:"font-black text-secondary text-sm mb-1.5",children:"بانتظار اختيار الغرفة"}),e.jsx("p",{className:"text-[11px] text-slate-400 font-bold leading-relaxed px-4",children:"يرجى اختيار نوع الغرفة المفضلة من الأسفل لحساب السعر النهائي وتأكيد التوفر"})]}):e.jsxs("div",{className:"bg-gold/10 border border-gold/20 rounded-3xl p-5 mb-8 text-center animate-bounce-in",children:[e.jsx("div",{className:"w-10 h-10 rounded-2xl bg-white shadow-sm flex items-center justify-center mx-auto mb-3 text-gold",children:e.jsx(bs,{size:20})}),e.jsx("h4",{className:"font-black text-secondary text-sm mb-1.5",children:"تم اختيار الغرفة بنجاح"}),e.jsx("p",{className:"text-[11px] text-gold-dark font-black leading-relaxed",children:"أنت الآن جاهز لإتمام الحجز في غرفتك المختارة"})]}),e.jsxs("div",{className:"space-y-2 mb-6 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center text-slate-500 font-bold",children:[e.jsx("span",{className:"text-xs",children:"سعر الغرفة / ليلة"}),e.jsxs("span",{className:"text-secondary font-black",children:[(b!==null?A[b].price:(s==null?void 0:s.basePrice)||400).toLocaleString()," ر.س"]})]}),Object.values(g).some(t=>t>0)&&e.jsxs("div",{className:"flex justify-between items-center text-slate-500 font-bold",children:[e.jsx("span",{className:"text-xs",children:"خدمة السرير الإضافي"}),e.jsxs("span",{className:"badge-gold",children:[Object.values(g).reduce((t,i)=>t+i,0)," سرير"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-slate-500 font-bold",children:[e.jsx("span",{className:"text-xs",children:"إجمالي الليالي"}),e.jsxs("span",{className:"text-secondary font-black",children:[b!==null&&((be=A[b].partialMetadata)!=null&&be.isPartial)?(te=A[b].partialMetadata)==null?void 0:te.availableNightsCount:a.nights||1," ليلة"]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-slate-50",children:[e.jsx("span",{className:"text-xs font-black text-secondary",children:"الإجمالي النهائي"}),e.jsx("div",{className:"flex items-baseline gap-1 dir-rtl",children:a.couponDiscount&&a.couponDiscount>0?e.jsxs("div",{className:"flex flex-col items-end leading-none gap-0.5",children:[e.jsxs("span",{className:"text-[10px] line-through text-slate-300 decoration-red-400",children:[(k>0?k:(s==null?void 0:s.basePrice)||400).toLocaleString()," ر.س"]}),e.jsxs("span",{className:"text-gold font-black",children:[Math.round((k>0?k:(s==null?void 0:s.basePrice)||400)*(1-(a.couponDiscount||0)/100)).toLocaleString()," ر.س"]})]}):e.jsxs("span",{className:"text-emerald-600 font-black",children:[(k>0?k:(s==null?void 0:s.basePrice)||400).toLocaleString()," ر.س"]})})]})]}),e.jsxs("div",{className:"bg-slate-50/80 rounded-2xl p-3 mb-5 border border-slate-100 flex items-center gap-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-white shadow-sm flex items-center justify-center text-gold shrink-0",children:e.jsx(gs,{size:16})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[10px] font-black text-secondary uppercase tracking-wider mb-0.5",children:"تسعير شفاف"}),e.jsx("p",{className:"text-[9px] font-bold text-slate-400 leading-tight",children:"الأسعار شاملة كافة الرسوم"})]})]}),e.jsxs("button",{onClick:()=>X(),className:`w-full text-white py-5 rounded-[2rem] font-black text-sm transition-all shadow-2xl flex items-center justify-center gap-3 group mb-4 active:scale-95 ${b!==null?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-900/20":"bg-slate-300 cursor-not-allowed opacity-50"}`,disabled:b===null,children:[e.jsx("span",{children:b!==null?"تأكيد وحجز الآن":"يرجى اختيار الغرفة"}),e.jsx(Ne,{size:18,className:"group-hover:-translate-x-1.5 transition-transform"})]}),e.jsx("p",{className:"text-[10px] text-center text-slate-400 font-bold mt-4 opacity-60",children:"بالمتابعة أنت توافق على شروط وسياسات الحجز الخاصة بنا"})]})]})})]})]}),Oe.createPortal(e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-[2000] md:hidden animate-slide-up pointer-events-none",children:e.jsx("div",{className:"mx-4 mb-6 pointer-events-auto",children:e.jsxs("div",{className:"bg-slate-50/95 backdrop-blur-2xl border border-white/50 rounded-[2.5rem] p-4 shadow-[0_25px_60px_-15px_rgba(0,0,0,0.3)] overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-gold/10 rounded-full blur-[70px] -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-32 h-32 bg-emerald-500/10 rounded-full blur-[50px] translate-y-1/2 -translate-x-1/2"}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between mb-3 pb-3 border-b border-slate-200/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-xl bg-gold/10 flex items-center justify-center text-gold shrink-0 border border-gold/10",children:e.jsx(ge,{size:14})}),e.jsxs("div",{className:"flex flex-col text-right",children:[e.jsxs("span",{className:"text-[10px] font-black text-secondary leading-none",children:[U(a.checkIn)," - ",U(a.checkOut)]}),e.jsx("span",{className:"text-[8px] text-slate-400 font-bold uppercase tracking-widest mt-0.5",children:"التواريخ"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex flex-col text-right items-end",children:[e.jsxs("span",{className:"text-[10px] font-black text-secondary leading-none",children:[a.adults," بالغ، ",a.children||0," طفل"]}),e.jsxs("span",{className:"text-[8px] text-slate-400 font-bold uppercase tracking-widest mt-0.5",children:[a.rooms||1," غرفة"]})]}),e.jsx("div",{className:"w-8 h-8 rounded-xl bg-gold/10 flex items-center justify-center text-gold shrink-0 border border-gold/10",children:e.jsx(ye,{size:14})})]})]}),b!==null&&e.jsxs("div",{className:"relative z-10 flex items-center gap-3 mb-4 p-3 bg-emerald-50/50 border border-emerald-100/50 rounded-2xl animate-fade-in",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white shadow-sm flex items-center justify-center text-emerald-600 border border-emerald-50 shrink-0",children:e.jsx(je,{size:18})}),e.jsxs("div",{className:"flex-1 text-right",children:[e.jsx("h5",{className:"text-[11px] font-black text-secondary leading-tight line-clamp-1",children:A[b].name}),e.jsxs("div",{className:"flex items-center justify-end gap-2 mt-0.5",children:[e.jsx("span",{className:"text-[9px] text-slate-500 font-bold",children:A[b].bed}),e.jsx("span",{className:"text-slate-200 text-[8px]",children:"|"}),e.jsx("span",{className:"text-[9px] text-gold-dark font-black",children:A[b].view||"إطلالة مدينة"})]})]})]}),e.jsxs("div",{className:"relative z-10 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col pr-2",children:[e.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-0.5",children:"المجموع النهائي"}),e.jsx("div",{className:"flex items-baseline gap-1 dir-rtl",children:a.couponDiscount&&a.couponDiscount>0?e.jsxs("div",{className:"flex flex-col items-start leading-none",children:[e.jsx("span",{className:"text-[9px] line-through text-slate-300 decoration-red-400",children:(k>0?k:(s==null?void 0:s.basePrice)||400).toLocaleString()}),e.jsxs("span",{className:"text-xl font-black text-emerald-700",children:[Math.round((k>0?k:(s==null?void 0:s.basePrice)||400)*(1-a.couponDiscount/100)).toLocaleString()," ",e.jsx("span",{className:"text-[9px]",children:"ر.س"})]})]}):e.jsxs("span",{className:"text-2xl font-black text-emerald-700 tracking-tight",children:[(k>0?k:(s==null?void 0:s.basePrice)||400).toLocaleString()," ",e.jsx("span",{className:"text-[10px] font-bold",children:"ر.س"})]})})]}),e.jsxs("button",{onClick:()=>{var t;b!==null?X():(t=v.current)==null||t.scrollIntoView({behavior:"smooth"})},className:`relative group overflow-hidden px-8 py-4 rounded-[2rem] font-black text-sm transition-all duration-500 active:scale-[0.96] flex items-center gap-2 whitespace-nowrap ${b!==null?"bg-emerald-600 text-white shadow-2xl shadow-emerald-900/40 hover:bg-emerald-700":"bg-slate-900 text-white shadow-2xl shadow-black/20 hover:bg-black"}`,children:[e.jsx("span",{className:"relative z-10",children:b!==null?"إتمام الحجز":"احجز الآن"}),e.jsx("div",{className:"w-5 h-5 rounded-full bg-white/20 flex items-center justify-center relative z-10 transition-transform group-hover:bg-gold/40",children:b!==null?e.jsx(Ne,{size:12,className:"group-hover:-translate-x-0.5 transition-transform"}):e.jsx(Ne,{size:12,className:"rotate-[-90deg] group-hover:translate-y-0.5 transition-transform"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]})]})]})})}),document.body)]}),e.jsx("style",{children:`
                @keyframes fadeInUp {
                    from { opacity: 0; transform: translateY(20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                @keyframes slideUp {
                    from { transform: translateY(100%); opacity: 0; }
                    to { transform: translateY(0); opacity: 1; }
                }
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes bounceIn {
                     0% { transform: scale(0.9); opacity: 0; }
                     60% { transform: scale(1.05); opacity: 1; }
                     100% { transform: scale(1); }
                }
                .animate-fade-in-up { animation: fadeInUp 0.6s ease-out forwards; }
                .animate-slide-up { animation: slideUp 0.5s cubic-bezier(0.19, 1, 0.22, 1) forwards; }
                .animate-fade-in { animation: fadeIn 0.8s ease-out forwards; opacity: 0; }
                .animate-bounce-in { animation: bounceIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; }
                .animate-pulse-slow { animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
            `}),e.jsx(ns,{isOpen:ue,onClose:()=>J(!1),onSearch:()=>ee(),hideDestination:!0,initialStep:"dates"}),oe&&Oe.createPortal(e.jsxs("div",{className:"fixed inset-0 z-[9999] bg-primary/95 flex flex-col",onClick:()=>V(!1),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6",children:[e.jsxs("div",{className:"text-white font-bold text-sm",children:[R+1," / ",B.length]}),e.jsx("button",{onClick:()=>V(!1),className:"p-2 bg-white/10 hover:bg-white/20 rounded-full transition-colors",children:e.jsx(Ue,{className:"text-white",size:24})})]}),e.jsxs("div",{className:"flex-1 flex items-center justify-center px-4 md:px-20 relative",onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:()=>L(t=>t>0?t-1:B.length-1),className:"absolute left-2 md:left-8 p-3 bg-white/10 hover:bg-white/20 rounded-full transition-colors z-10",children:e.jsx(Ce,{className:"text-white",size:28})}),e.jsx("img",{src:B[R],alt:`${s==null?void 0:s.name} - ${R+1}`,className:"max-h-[70vh] max-w-full object-contain rounded-lg"}),e.jsx("button",{onClick:()=>L(t=>t<B.length-1?t+1:0),className:"absolute right-2 md:right-8 p-3 bg-white/10 hover:bg-white/20 rounded-full transition-colors z-10",children:e.jsx(Ze,{className:"text-white",size:28})})]}),e.jsx("div",{className:"p-4 md:p-6",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto justify-center no-scrollbar",children:B.map((t,i)=>e.jsx("button",{onClick:r=>{r.stopPropagation(),L(i)},className:`shrink-0 w-16 h-12 md:w-20 md:h-14 rounded-lg overflow-hidden border-2 transition-all ${i===R?"border-white scale-110":"border-transparent opacity-50 hover:opacity-80"}`,children:e.jsx("img",{src:t,alt:"",className:"w-full h-full object-cover"})},i))})})]}),document.body)]})]})};export{ct as default};
