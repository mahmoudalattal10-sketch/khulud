import{p as S,g as Ue,u as He,b as Ve,a as Ge,r as a,z as Je,j as e,L as Ye,l as de,P as xe,U as qe,n as me,i as pe,A as U,M as We,f as Ke,C as Qe,H as Ze,D as ue,m as Re}from"./index-BnuycFB_.js";import{M as es,c as he}from"./confetti.module-Fb60ZucG.js";import{C as fe}from"./constants-DFgKc18Q.js";import{L as H}from"./loader-circle-CRvOquIC.js";import{C as ss}from"./chevron-right-BbAb0F-g.js";import{C as ts}from"./check-BqLKQ3Qa.js";import{S as as}from"./star-MDrf6UGl.js";import{M as ls}from"./map-pin-DOPbNB_R.js";import{H as rs}from"./hotel-BKzV7ab4.js";import{E as ns}from"./eye-BTIgcQ8m.js";import{B as ge}from"./bed-double-CBGXJ_5-.js";import{C as is}from"./calendar-BMe2UDs8.js";import{S as V}from"./shield-check-rBeJKJH1.js";import{L as be}from"./lock-C05TgmoY.js";import{C as je,S as os,P as cs}from"./search-BTLAkR-M.js";import{P as ds}from"./percent-2niy-Gru.js";const xs=async b=>{const j=await fetch("/api/payment/create",{method:"POST",headers:{"Content-Type":"application/json",...S.isLoggedIn()?{Authorization:`Bearer ${localStorage.getItem("diafat_auth_token")}`}:{}},body:JSON.stringify(b)});if(!j.ok)throw new Error("Payment initialization failed");return await j.json()},Ls=()=>{var ie,oe;const{id:b}=Ue(),j=He(),Ne=Ve(),{searchData:i,initializeForBooking:we}=Ge(),[c,G]=a.useState(1),[J,Y]=a.useState(!1),[q,p]=a.useState(""),[l,ve]=a.useState(null),[ke,W]=a.useState(!0),ye=a.useRef(null);a.useEffect(()=>{we()},[]);const r=Ne.state,[N,ms]=a.useState((r==null?void 0:r.extraBedCount)||0),[O,ps]=a.useState((r==null?void 0:r.roomCount)||1),[w,Ce]=a.useState(""),[u,Se]=a.useState(""),[h,ze]=a.useState(""),[z,Ie]=a.useState(""),{user:f,login:Pe}=Je(),[v,K]=a.useState(!!f);a.useEffect(()=>{K(!!f)},[f]);const[d,_e]=a.useState(fe[0]),[Q,T]=a.useState(!1),[I,Z]=a.useState(""),Ee=fe.filter(s=>s.name.includes(I)||s.dial_code.includes(I)||s.code.toLowerCase().includes(I.toLowerCase())),[k,Le]=a.useState(i.promoCode||""),[R,ee]=a.useState(i.couponDiscount||0),[y,se]=a.useState(!!i.couponDiscount&&i.couponDiscount>0),[us,A]=a.useState(""),[hs,te]=a.useState(i.couponDiscount?`تم تطبيق خصم ${i.couponDiscount}% مسبقاً`:""),[ae,le]=a.useState(!1),[M,re]=a.useState(!1);a.useEffect(()=>{(async()=>{var o;W(!0);try{if(b){const n=await Ze.getById(b);n.success&&n.data?ve(n.data):p("لم يتم العثور على الفندق")}if(S.isLoggedIn()){K(!0);const n=await S.profile();n.success&&((o=n.data)!=null&&o.user)}}catch(n){console.error("Failed to load data",n),p("حدث خطأ في تحميل البيانات")}finally{W(!1)}})()},[b]);const t=((ie=l==null?void 0:l.rooms)==null?void 0:ie.find(s=>s.id===(r==null?void 0:r.roomId)))||((oe=l==null?void 0:l.rooms)==null?void 0:oe[0]),De=(t==null?void 0:t.name)||"غرفة ديلوكس",$e=(r==null?void 0:r.price)||(t==null?void 0:t.price)||(l==null?void 0:l.basePrice)||0,Be=N>0&&(t!=null&&t.allowExtraBed)?(t.extraBedPrice||0)*N:0,Oe=$e*O+Be,P=r!=null&&r.checkIn?new Date(r.checkIn):i.checkIn,_=r!=null&&r.checkOut?new Date(r.checkOut):i.checkOut,E=P&&_?Math.ceil((_.getTime()-P.getTime())/(1e3*60*60*24)):i.nights||1,L=Oe*E,ne=y?L*R/100:0,X=L-ne;a.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[c]);const Te=()=>{c<2&&G(c+1)},Ae=()=>{c>1?G(c-1):j(-1)},Me=()=>w.trim()?!u.trim()||!u.includes("@")?(p("الرجاء إدخال بريد إلكتروني صحيح"),!1):!h.trim()||h.length<9?(p("الرجاء إدخال رقم هاتف صحيح"),!1):!v&&!z.trim()?(p("الرجاء إدخال كلمة مرور لإنشاء الحساب"),!1):(p(""),!0):(p("الرجاء إدخال الاسم"),!1),Xe=async()=>{if(k.trim()){le(!0),A(""),te("");try{const o=await(await fetch("http://localhost:3001/api/coupons/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:k})})).json();if(o.valid){ee(o.discount),se(!0),te(`تم تطبيق خصم ${o.discount}% بنجاح!`),re(!1);const n=3*1e3,ce=Date.now()+n,D={startVelocity:30,spread:360,ticks:60,zIndex:0},$=(x,m)=>Math.random()*(m-x)+x,F=setInterval(function(){const x=ce-Date.now();if(x<=0)return clearInterval(F);const m=50*(x/n);he({...D,particleCount:m,origin:{x:$(.1,.3),y:Math.random()-.2}}),he({...D,particleCount:m,origin:{x:$(.7,.9),y:Math.random()-.2}})},250);setTimeout(()=>{var x;(x=ye.current)==null||x.scrollIntoView({behavior:"smooth",block:"center"})},500)}else A(o.message||"الكوبون غير صالح أو انتهت صلاحيته"),se(!1),ee(0)}catch{A("حدث خطأ أثناء التحقق من الكوبون")}finally{le(!1)}}},Fe=async()=>{var s;if(!(!Me()||!l)){Y(!0),p("");try{if(!v){let m="",B=null;const g=await S.register({name:w.trim(),email:u.trim(),phone:`${d.dial_code}${h}`,password:z,country:d.name});if(g.success&&g.data)m=g.data.token,B=g.data.user;else if((s=g.error)!=null&&s.includes("Email already registered")){const C=await S.login(u.trim(),z);if(C.success&&C.data)m=C.data.token,B=C.data.user;else throw new Error(C.error||"فشل تسجيل الدخول. يرجى التأكد من كلمة المرور.")}else throw ue.remove(),new Error(g.error||"فشل إنشاء الحساب");if(m&&B)ue.set(m),Pe(m,B);else throw new Error("فشل التحقق من الجلسة")}const o=t==null?void 0:t.id;if(!o)throw new Error("لا توجد غرف متاحة للحجز حالياً");const n=await Re.create({roomId:o,checkIn:P?P.toISOString():new Date().toISOString(),checkOut:_?_.toISOString():new Date(Date.now()+864e5).toISOString(),guestsCount:i.adults||2,roomCount:O,extraBedCount:N,guestName:w,guestEmail:u.trim(),guestPhone:`${d.dial_code}${h}`,specialRequests:"",promoCode:y?k:void 0});if(!n.success||!n.data)throw new Error(n.error||"فشل إنشاء الحجز");const D=n.data.id,$=`${window.location.origin}/#/payment/callback`,F=`${window.location.origin}/#/payment/callback`,x=await xs({cart_id:D,cart_description:`حجز ${l.name} - ${E} ليالي`,cart_currency:"SAR",cart_amount:X,customer_details:{name:w,email:u,phone:`${d.dial_code}${h}`,street1:"مكة المكرمة",city:"مكة",state:"مكة",country:d.code||"SA",ip:"1.1.1.1"},callback:$,return:F});window.location.href=x}catch(o){console.error("Payment/Booking Error:",o),p(o.message||"حدث خطأ في عملية الحجز. يرجى المحاولة مرة أخرى."),Y(!1)}}};return ke?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:e.jsx(H,{className:"w-8 h-8 text-gold animate-spin"})}):l?e.jsxs("div",{className:"min-h-screen bg-slate-50 font-cairo text-text pb-20 md:pt-32",children:[e.jsx("header",{className:"fixed top-0 left-0 right-0 z-[1001] h-20 bg-white/90 backdrop-blur-2xl border-b border-slate-100/50 transition-all duration-500 shadow-sm",children:e.jsxs("div",{className:"max-w-[1400px] mx-auto h-full px-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ye,{to:"/",className:"transition-all active:scale-95 shrink-0",children:e.jsx("img",{src:"/assets/images/ui/logo.png",alt:"Logo",className:"h-16 w-auto"})}),e.jsx("div",{className:"hidden sm:block h-8 w-px bg-slate-100 mx-2"}),e.jsxs("button",{onClick:Ae,className:"flex items-center gap-2.5 bg-secondary text-white px-5 py-2.5 rounded-2xl shadow-lg shadow-secondary/10 hover:bg-gold transition-all active:scale-95 group font-black text-sm",children:[e.jsx(ss,{size:20,className:"group-hover:translate-x-1 transition-transform"}),e.jsx("span",{children:"العودة"})]})]}),e.jsxs("div",{className:"hidden md:flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-gold animate-pulse"}),e.jsx("h1",{className:"font-black text-lg text-secondary tracking-tight whitespace-nowrap",children:"إتمام الحجز الآمن"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{size:10,className:"text-emerald-500"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 truncate max-w-[200px]",children:l==null?void 0:l.name})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase leading-none mb-1",children:"دعم ضيافة خلود"}),e.jsx("span",{className:"text-xs font-black text-secondary tracking-tighter",dir:"ltr",children:"055 388 2445"})]}),e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-50 border border-slate-100 flex items-center justify-center text-gold",children:e.jsx(xe,{size:18})})]})]})}),e.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col gap-6 mb-12",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"text-[10px] font-black text-gold uppercase tracking-[0.2em] mb-1",children:["الخطوة ",c," من 2"]}),e.jsx("h2",{className:"text-xl font-black text-secondary",children:c===1?"تأكيد تفاصيل الإقامة":"بيانات الضيف والدفع"})]}),e.jsx("div",{className:"flex -space-x-1 rtl:space-x-reverse",children:[1,2].map(s=>e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-black text-sm border-4 border-slate-50 transition-all duration-500 shadow-sm ${c>=s?"bg-secondary text-white scale-110 z-10":"bg-white text-slate-300"}`,children:c>s?e.jsx(ts,{size:16,strokeWidth:3}):s},s))})]}),e.jsx("div",{className:"h-1.5 w-full bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-secondary rounded-full transition-all duration-700 ease-ios",style:{width:`${c/2*100}%`}})})]}),e.jsxs("div",{className:"space-y-6",children:[c===1&&l&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"bg-white rounded-[2rem] p-6 shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-slate-100/50 flex flex-col sm:flex-row gap-6 group hover:border-gold/30 transition-all duration-500 overflow-hidden relative",children:[e.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-gold/5 rounded-full blur-3xl -translate-x-1/2 -translate-y-1/2 group-hover:bg-gold/10 transition-colors"}),e.jsx("div",{className:"w-full sm:w-32 h-32 rounded-2xl overflow-hidden shrink-0 shadow-inner relative z-10",children:e.jsx("img",{src:l.image,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",alt:"hotel"})}),e.jsxs("div",{className:"relative z-10 flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-1 bg-emerald-500/10 text-emerald-600 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-wider",children:[e.jsx(as,{size:10,fill:"currentColor"}),e.jsxs("span",{children:[l.rating," ممتاز"]})]}),e.jsx("div",{className:"w-px h-3 bg-slate-200"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest leading-none",children:"إقامة موثقة"})]}),e.jsx("h2",{className:"font-black text-secondary text-2xl mb-2 leading-tight tracking-tight",children:l.name}),e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-xs font-bold bg-slate-50 self-start px-3 py-1.5 rounded-lg border border-slate-100",children:[e.jsx(ls,{size:14,className:"text-secondary"}),e.jsx("span",{children:l.location})]})]})]}),e.jsxs("div",{className:"bg-white rounded-[2rem] p-8 shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-slate-100/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h3",{className:"font-black text-secondary text-lg flex items-center gap-3",children:[e.jsx("div",{className:"w-1.5 h-6 bg-gold rounded-full"}),"تفاصيل الإقامة"]}),e.jsxs("div",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] bg-slate-50 px-3 py-1.5 rounded-full border border-slate-100",children:["رقم المرجع: #",Math.random().toString(36).substr(2,6).toUpperCase()]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"flex flex-col gap-6 p-6 rounded-2xl bg-slate-50/50 border border-slate-100 group hover:border-gold/20 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white shadow-sm flex items-center justify-center text-secondary group-hover:scale-110 transition-transform",children:e.jsx(rs,{size:22})}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5",children:"فئة الغرفة المختارة"}),e.jsx("span",{className:"block text-secondary font-black text-sm",children:De})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-slate-200/50",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white border border-slate-100 flex items-center justify-center text-gold",children:e.jsx(es,{size:14})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-wider",children:"مساحة الغرفة"}),e.jsxs("span",{className:"text-[11px] font-bold text-secondary",children:[(t==null?void 0:t.area)||"---"," م²"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white border border-slate-100 flex items-center justify-center text-gold",children:e.jsx(ns,{size:14})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-wider",children:"الإطلالة"}),e.jsx("span",{className:"text-[11px] font-bold text-secondary",children:(t==null?void 0:t.view)||"إطلالة مدينة"})]})]}),e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white border border-slate-100 flex items-center justify-center text-gold",children:e.jsx(ge,{size:14})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-wider",children:"توزيع الأسرة"}),e.jsx("span",{className:"text-[11px] font-bold text-secondary",children:(t==null?void 0:t.beds)||"أسرة ملكية"})]})]}),e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-white border border-slate-100 flex items-center justify-center text-gold",children:e.jsx(qe,{size:14})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase tracking-wider",children:"السعة القصوى"}),e.jsxs("span",{className:"text-[11px] font-bold text-secondary",children:[(t==null?void 0:t.capacity)||2," أشخاص"]})]})]})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-2xl bg-slate-50/50 border border-slate-100 group hover:border-gold/20 transition-all duration-300",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white shadow-sm flex items-center justify-center text-secondary group-hover:scale-110 transition-transform",children:e.jsx(me,{size:22})}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5",children:"الضيوف والحجوزات"}),e.jsxs("span",{className:"block text-secondary font-black text-sm",children:[i.adults||2," بالغين · ",O," غرف",i.children>0&&e.jsxs("span",{className:"opacity-60 block text-[11px] font-bold mt-0.5",children:["+ ",i.children," أطفال"]})]})]})]}),e.jsxs("div",{className:"sm:col-span-2 flex items-center gap-6 p-6 rounded-[1.5rem] bg-secondary text-white relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gold/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/10 backdrop-blur-md flex items-center justify-center text-gold group-hover:scale-110 transition-transform",children:e.jsx(is,{size:28})}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 items-center gap-8 relative z-10",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 opacity-70",children:"تاريخ الوصول"}),e.jsx("span",{className:"block font-black text-lg leading-none",children:pe(i.checkIn)})]}),e.jsxs("div",{className:"border-r border-white/10 pr-8 relative",children:[e.jsx("div",{className:"absolute left-full top-1/2 -translate-y-1/2 ml-4 w-6 h-6 rounded-full bg-white/5 border border-white/10 flex items-center justify-center",children:e.jsx(U,{size:12,className:"text-gold"})}),e.jsx("span",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 opacity-70",children:"تاريخ المغادرة"}),e.jsx("span",{className:"block font-black text-lg leading-none",children:pe(i.checkOut)})]})]}),e.jsxs("div",{className:"bg-gold text-secondary px-4 py-2 rounded-xl text-xs font-bold shadow-lg shadow-gold/20",children:[E," ليالي"]})]})]}),t!=null&&t.allowExtraBed&&N>0?e.jsxs("div",{className:"bg-emerald-500/5 border border-emerald-500/10 rounded-2xl p-5 mb-8 flex items-center justify-between group",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-white shadow-sm flex items-center justify-center text-emerald-600 transition-transform group-hover:scale-110",children:e.jsx(ge,{size:22})}),e.jsxs("div",{children:[e.jsx("span",{className:"block text-secondary font-black text-sm",children:"سرير إضافي مضاف"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"تحسين الراحة والخصوصية"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("span",{className:"block text-secondary font-black text-base",children:[N," أسرة"]}),e.jsxs("span",{className:"text-[10px] font-bold text-emerald-600 uppercase tracking-widest",children:["+",t.extraBedPrice," ر.س / ليلة"]})]})]}):null,e.jsxs("div",{className:"border-t border-slate-100 pt-8 mt-4 flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-slate-400 font-bold text-sm",children:[e.jsxs("span",{children:["سعر الغرفة (",E," ليالي)"]}),e.jsxs("span",{className:"text-secondary",children:[L.toLocaleString()," ر.س"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-slate-400 font-bold text-sm",children:[e.jsx("span",{children:"الرسوم والضرائب"}),e.jsx("span",{className:"text-emerald-600",children:"مشمولة"})]}),e.jsx("div",{className:"h-px bg-slate-50 my-2"}),e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] font-black text-gold uppercase tracking-[0.2em] mb-1",children:"الإجمالي الشامل"}),e.jsxs("span",{className:"text-3xl font-black text-secondary tracking-tight",children:[X.toLocaleString()," ",e.jsx("span",{className:"text-sm",children:"ر.س"})]})]}),e.jsxs("button",{onClick:Te,className:"bg-secondary text-white px-10 py-4 rounded-2xl font-black text-base shadow-2xl shadow-secondary/20 hover:scale-[1.02] active:scale-[0.96] transition-all flex items-center gap-3 group",children:[e.jsx("span",{children:"متابعة للبيانات"}),e.jsx(U,{size:20,className:"group-hover:-translate-x-1.5 transition-transform"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[e.jsx(V,{size:18,className:"text-emerald-600"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-500",children:"نحن نضمن حماية بياناتك وأفضل الأسعار المتاحة للحجز المباشر."})]})]})]})]}),c===2&&l&&e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"bg-secondary text-white p-6 rounded-[2rem] shadow-2xl shadow-secondary/20 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-gold/10 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 group-hover:bg-gold/20 transition-colors"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-5",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white/10 backdrop-blur-md flex items-center justify-center text-gold",children:e.jsx(de,{size:28,className:"animate-pulse-slow"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-black text-lg mb-1 tracking-tight",children:"تأمين الحجز المتقدم"}),e.jsxs("p",{className:"text-slate-400 text-xs font-bold leading-relaxed",children:["بياناتك محمية بتشفير عالي المستوى وتتم معالجتها عبر بوابة ",e.jsx("span",{className:"text-white",children:"PayTabs"})," المعتمدة عالمياً."]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-[2rem] p-8 shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-slate-100/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-1.5 h-6 bg-gold rounded-full"}),e.jsx("h3",{className:"font-black text-secondary text-lg",children:v?"التحقق من بيانات المسافر":"تسجيل حساب ضيافة موثق"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mr-1",children:"الاسم الكامل ثلاثي *"}),e.jsxs("div",{className:"relative group/field",children:[e.jsx("input",{type:"text",value:w,onChange:s=>Ce(s.target.value),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl pl-14 pr-6 py-4 text-secondary font-black focus:outline-none focus:border-gold focus:bg-white transition-all duration-300 placeholder:text-slate-300",placeholder:"مثال: محمد بن ناصر بن عبد العزيز"}),e.jsx(me,{size:18,className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within/field:text-gold transition-colors"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mr-1",children:"البريد الإلكتروني للإرسال التلقائي *"}),e.jsxs("div",{className:"relative group/field",children:[e.jsx("input",{type:"email",value:u,onChange:s=>Se(s.target.value),autoComplete:"off",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl pl-14 pr-6 py-4 text-secondary font-black focus:outline-none focus:border-gold focus:bg-white transition-all duration-300 placeholder:text-slate-300 text-left dir-ltr",placeholder:"name@example.com"}),e.jsx(We,{size:18,className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within/field:text-gold transition-colors"})]})]}),v?e.jsxs("div",{className:"bg-emerald-50 border border-emerald-100 p-4 rounded-2xl flex items-center gap-3 animate-fade-in",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-white shadow-sm flex items-center justify-center text-emerald-600",children:e.jsx(V,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[11px] font-black text-emerald-700",children:"أنت مسجل دخولك بالفعل"}),e.jsxs("p",{className:"text-[10px] font-bold text-emerald-600/70",children:["سيتم ربط هذا الحجز بحسابك: ",f==null?void 0:f.email]})]})]}):e.jsxs("div",{className:"space-y-2 animate-fade-in",children:[e.jsxs("label",{className:"text-[10px] font-black text-secondary uppercase tracking-widest mr-1 flex items-center gap-2",children:["إنشاء كلمة مرور (سيتم إنشاء حساب لك تلقائياً عند الحجز) *",e.jsx("span",{className:"text-[9px] text-indigo-600 lowercase bg-indigo-50 px-2 py-0.5 rounded-full font-bold",children:"حساب جديد"})]}),e.jsxs("div",{className:"relative group/field",children:[e.jsx("input",{type:"password",value:z,onChange:s=>Ie(s.target.value),autoComplete:"new-password",className:"w-full bg-slate-50 border border-slate-200 rounded-2xl pl-14 pr-6 py-4 text-secondary font-black focus:outline-none focus:border-gold focus:bg-white transition-all duration-300 placeholder:text-slate-300",placeholder:"اختر كلمة مرور لحسابك"}),e.jsx(be,{size:18,className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within/field:text-gold transition-colors"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mr-1",children:"رقم الجوال للتواصل والدعم *"}),e.jsxs("div",{className:"flex gap-3",dir:"ltr",children:[e.jsxs("div",{className:"relative shrink-0",children:[e.jsxs("button",{onClick:()=>T(!Q),className:"bg-slate-50 border border-slate-200 rounded-2xl px-4 h-full flex items-center gap-3 hover:bg-slate-100 transition-all duration-300 min-w-[120px] justify-between group/country active:scale-95",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:d.flag,alt:d.code,className:"w-6 rounded-sm shadow-sm"}),e.jsx("span",{className:"font-black text-secondary text-sm",children:d.dial_code})]}),e.jsx(je,{size:14,className:"text-slate-400 group-hover:text-gold transition-colors"})]}),Q&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-[1050]",onClick:()=>T(!1)}),e.jsxs("div",{className:"absolute top-[calc(100%+8px)] left-0 w-72 bg-white rounded-2xl shadow-[0_20px_50px_rgba(0,0,0,0.15)] border border-slate-100 z-[1051] overflow-hidden animate-fade-in",children:[e.jsxs("div",{className:"p-4 border-b border-slate-50 bg-slate-50/50 relative",children:[e.jsx(os,{size:14,className:"absolute left-7 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"ابحث عن الدولة...",className:"w-full bg-white rounded-xl pl-9 pr-4 py-2.5 text-xs font-black focus:outline-none focus:ring-2 focus:ring-gold/20 text-right text-secondary",value:I,onChange:s=>Z(s.target.value),autoFocus:!0})]}),e.jsx("div",{className:"max-h-64 overflow-y-auto custom-scrollbar p-2",children:Ee.map(s=>e.jsxs("button",{onClick:()=>{_e(s),T(!1),Z("")},className:`w-full flex items-center justify-between p-3 rounded-xl text-xs transition-all duration-200 group/item ${d.code===s.code?"bg-secondary text-white":"text-slate-600 hover:bg-slate-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.flag,alt:s.code,className:"w-5 rounded-sm shadow-sm"}),e.jsx("span",{className:"font-black",children:s.name})]}),e.jsx("span",{className:`font-black tracking-tight ${d.code===s.code?"text-gold":"text-slate-400"}`,children:s.dial_code})]},s.code))})]})]})]}),e.jsxs("div",{className:"relative flex-1 group/field",children:[e.jsx("input",{type:"tel",value:h,onChange:s=>ze(s.target.value.replace(/\D/g,"")),className:"w-full bg-slate-50 border border-slate-200 rounded-2xl pl-14 pr-6 py-4 text-secondary font-black tracking-[0.1em] text-right focus:outline-none focus:border-gold focus:bg-white transition-all duration-300 placeholder:text-slate-300",placeholder:"5XXXXXXXX"}),e.jsx(xe,{size:18,className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within/field:text-gold transition-colors"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-[2rem] p-8 shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-slate-100/50",children:[e.jsxs("button",{onClick:()=>re(!M),className:"flex items-center justify-between w-full group/coupon",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gold/5 text-gold flex items-center justify-center group-hover/coupon:scale-110 transition-transform",children:e.jsx(ds,{size:18})}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"block text-secondary font-black text-sm",children:"هل تحمل رمز خصم خاص؟"}),e.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"اضغط هنا لتفعيل العرض"})]})]}),e.jsx(je,{size:18,className:`text-slate-300 group-hover/coupon:text-gold transition-all duration-500 ${M?"rotate-180":""}`})]}),M&&e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row gap-3 animate-fade-in",children:[e.jsxs("div",{className:"relative flex-1 group/field",children:[e.jsx("input",{type:"text",placeholder:"أدخل مسمى الرمز الترويجي",className:"w-full bg-slate-50 border border-slate-200 rounded-xl px-6 py-4 text-sm font-black text-secondary focus:outline-none focus:border-gold transition-all uppercase tracking-widest",value:k,onChange:s=>Le(s.target.value.toUpperCase()),disabled:y}),e.jsx(cs,{size:16,className:"absolute left-6 top-1/2 -translate-y-1/2 text-slate-300 group-focus-within/field:text-gold transition-colors"})]}),e.jsx("button",{onClick:Xe,disabled:ae||y||!k,className:"bg-secondary text-white px-8 py-4 rounded-xl font-black text-sm hover:scale-[1.02] active:scale-[0.96] disabled:opacity-50 transition-all shadow-lg",children:ae?e.jsx(H,{size:18,className:"animate-spin"}):"تطبيق الرمز"})]}),e.jsxs("div",{className:"mt-10 bg-slate-50/50 rounded-[1.5rem] p-6 border border-slate-100/80 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"إجمالي الحجز المبدئي"}),e.jsxs("span",{className:"text-secondary font-black text-sm",children:[L.toLocaleString()," ر.س"]})]}),y&&e.jsxs("div",{className:"flex justify-between items-center text-emerald-600 bg-emerald-500/5 p-3 rounded-xl border border-emerald-500/10",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{size:14}),e.jsxs("span",{className:"text-[10px] font-black uppercase tracking-widest",children:["تم تطبيق الخصم (",R,"%)"]})]}),e.jsxs("span",{className:"font-black text-sm",children:["- ",ne.toLocaleString()," ر.س"]})]}),e.jsx("div",{className:"h-px bg-slate-200/50"}),e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-[10px] font-black text-gold uppercase tracking-[0.2em] mb-1",children:"صافي القيمة المستحقة"}),e.jsxs("span",{className:"text-3xl font-black text-secondary tracking-tighter",children:[X.toLocaleString()," ",e.jsx("span",{className:"text-sm font-bold",children:"ر.س"})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-white px-3 py-1.5 rounded-xl shadow-sm border border-slate-100 flex items-center justify-center h-[32px]",children:e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/d/d6/Visa_2021.svg",alt:"Visa",className:"h-3 w-auto object-contain"})}),e.jsx("div",{className:"bg-white px-2 py-1.5 rounded-xl shadow-sm border border-slate-100 flex items-center justify-center h-[32px]",children:e.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg",alt:"Mastercard",className:"h-5 w-auto object-contain"})})]}),e.jsx("span",{className:"text-[9px] font-black text-slate-400 uppercase",children:"الدفع عبر بوابة PayTabs الآمنة"})]})]})]}),e.jsxs("div",{className:"mt-8 flex flex-col gap-4",children:[e.jsxs("button",{onClick:Fe,disabled:J,className:"w-full bg-secondary text-white py-5 rounded-2xl font-black text-lg transition-all shadow-[0_20px_40px_-10px_rgba(15,23,42,0.3)] hover:scale-[1.01] active:scale-[0.98] flex items-center justify-center gap-4 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),J?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-6 h-6 animate-spin text-gold"}),e.jsx("span",{className:"relative z-10",children:"جاري توثيق العملية..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{size:22,className:"text-gold"}),e.jsx("span",{className:"relative z-10",children:v?"تأكيد الحجز والدفع النهائي":"توثيق البيانات وتأكيد الدفع"}),e.jsx(U,{size:22,className:"group-hover:-translate-x-2 transition-transform"})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-slate-400",children:[e.jsx(be,{size:12}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest leading-none",children:"تشفير SSL 256-bit مفعل"})]})]})]}),q&&e.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 text-red-600 p-5 rounded-2xl flex items-center gap-4 animate-shake",children:[e.jsx(Qe,{size:20,className:"shrink-0"}),e.jsx("p",{className:"text-xs font-black",children:q})]})]})]})]}),e.jsx("style",{children:`
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
                .animate-fade-in { animation: fadeIn 0.4s ease-out forwards; }
                
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    25% { transform: translateX(-5px); }
                    75% { transform: translateX(5px); }
                }
                .animate-shake { animation: shake 0.2s ease-in-out 0s 2; }
                
                .ease-ios {
                    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
                }
                
                .custom-scrollbar::-webkit-scrollbar {
                    width: 5px;
                }
                .custom-scrollbar::-webkit-scrollbar-track {
                    background: transparent;
                }
                .custom-scrollbar::-webkit-scrollbar-thumb {
                    background: #cbd5e1;
                    border-radius: 10px;
                }
                .dir-ltr { direction: ltr; }
            `})]}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-slate-50 flex-col gap-4",children:[e.jsx("p",{className:"text-slate-500 font-bold",children:"عذراً، لم يتم العثور على الفندق المطلوب"}),e.jsx("button",{onClick:()=>j("/"),className:"text-text font-bold",children:"العودة للرئيسية"})]})};export{Ls as default};
